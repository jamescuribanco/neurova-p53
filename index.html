<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Neurova P53</title>

<style>
body {
  margin:0;
  font-family:'Segoe UI', Arial, sans-serif;
  background:#f8fbff;
  color:#1f2937;
}
header {
  background: linear-gradient(90deg, #e0f2fe, #bae6fd, #93c5fd);
  padding: 20px 40px;
  display:flex;
  align-items:center;
  justify-content:space-between;
}
header h1 { margin:0; color:#0f172a; font-size:28px; letter-spacing:1px;}
nav a { margin-left:20px; text-decoration:none; color:#0f172a; font-weight:500; cursor:pointer;}
.container { max-width:1100px; margin:40px auto; padding:0 20px; }
.card {
  background:white;
  border-radius:16px;
  box-shadow:0 10px 30px rgba(0,0,0,0.08);
  padding:30px;
  margin-bottom:20px;
  text-align:center;
}
.card h3 { color:#0077cc; }
button {
  margin-top:15px;
  padding:12px 20px;
  border:none;
  border-radius:12px;
  background:#0077cc;
  color:white;
  cursor:pointer;
}
button:hover { background:#005fa3; }
.hidden { display:none; }
h2 { color:#1e3a8a; margin-bottom:20px; }
</style>
</head>

<body>

<header>
  <img src="logo.jpeg" alt="Neurova P53" style="height:90px;">
  <h1>Neurova P53</h1>
  <nav>
    <a onclick="showSection('inicio')">Inicio</a>
    <a onclick="showSection('cursos-container')">Cursos</a>
    <a onclick="showSection('horario-container')">Horario</a>
    <a id="admin-nav" class="hidden" onclick="showSection('admin-panel')">Admin</a>
  </nav>
</header>

<!-- LOGIN -->
<div class="container card" id="login-container">
  <h2>Iniciar sesi√≥n</h2>
  <button id="login-btn">Login con Google</button>
  <div id="user-display" style="margin-top:10px; font-weight:bold;"></div>
  <button id="logout-btn" class="hidden" style="background:#ef4444;">Cerrar sesi√≥n</button>
</div>

<!-- INICIO -->
<div id="inicio" class="container">
  <h2>Bienvenido a Neurova P53</h2>
  <p>Academia premium especializada en ciencias de la salud. Formaci√≥n rigurosa, clara y progresiva, dise√±ada por ciclos acad√©micos.</p>
</div>

<!-- CURSOS -->
<div id="cursos-container" class="container hidden">
  <h2>Cursos Disponibles</h2>
  <div id="cursos-list" style="display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px;"></div>
</div>

<!-- ADMIN PANEL -->
<div id="admin-panel" class="container card hidden">
  <h2>Panel Admin</h2>
  <p>Aqu√≠ puedes agregar cursos, subir PDFs, grabaciones y formularios para los alumnos.</p>
  <button onclick="alert('Agregar curso')">Agregar Curso</button>
  <button onclick="alert('Agregar Contenido')">Agregar PDF/Grabaci√≥n</button>
  <button onclick="alert('Ver avance de alumnos')">Ver Avance</button>
</div>

<!-- HORARIO -->
<div id="horario-container" class="container hidden"></div>

<!-- SUBCURSOS Y SEMANAS -->
<div id="subcurso-container" class="container hidden">
  <h2 id="subcurso-title"></h2>
  <div id="subcurso-list" style="display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px;"></div>
  <button onclick="volverACursos()" style="margin-top:20px; padding:10px 20px; background:#2563eb; color:white; border:none; border-radius:10px; cursor:pointer;">Volver a Cursos</button>
</div>

<div id="semana-container" class="container hidden">
  <h2 id="semana-title"></h2>
  <div id="semana-list" style="display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px;"></div>
  <button onclick="volverASubcurso()" style="margin-top:20px; padding:10px 20px; background:#2563eb; color:white; border:none; border-radius:10px; cursor:pointer;">Volver a Subcursos</button>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-app.js";
import { getAuth, GoogleAuthProvider, signInWithPopup, signOut } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-auth.js";

const firebaseConfig = {
  apiKey:"AIzaSyDAmEVU8J-uk2Yg6bL5n28xbP1771cHGME",
  authDomain:"neurovap53-cdbcf.firebaseapp.com",
  projectId:"neurovap53-cdbcf"
};
const app = initializeApp(firebaseConfig);
const auth = getAuth();
const provider = new GoogleAuthProvider();

const loginBtn = document.getElementById('login-btn');
const logoutBtn = document.getElementById('logout-btn');
const userDisplay = document.getElementById('user-display');
const adminNav = document.getElementById('admin-nav');

loginBtn.addEventListener('click', async ()=>{
  try{
    const result = await signInWithPopup(auth, provider);
    const user = result.user;
    loginBtn.classList.add('hidden');
    logoutBtn.classList.remove('hidden');
    userDisplay.innerText=`Hola, ${user.displayName}`;
    document.getElementById('login-container').classList.add('hidden');

    if(user.email === "jamesucribanco333@gmail.com"){
      adminNav.classList.remove('hidden');
      document.getElementById('admin-panel').classList.remove('hidden');
    }

    mostrarCursos();
  }catch(err){alert("Error: "+err.message);}
});

logoutBtn.addEventListener('click', async ()=>{
  await signOut(auth);
  loginBtn.classList.remove('hidden');
  logoutBtn.classList.add('hidden');
  adminNav.classList.add('hidden');
  userDisplay.innerText='';
  document.getElementById('cursos-container').classList.add('hidden');
  document.getElementById('admin-panel').classList.add('hidden');
});

function showSection(id){
  const sections = ['inicio','cursos-container','horario-container','admin-panel','subcurso-container','semana-container'];
  sections.forEach(s=>document.getElementById(s).classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
}

let cursoActual='';

const cursos = {
  "Morfofisiolog√≠a 1": ["Semana 1","Semana 2","Semana 3","Semana 4","Semana 5","Semana 6","Semana 7","Semana 8"],
  "Morfofisiolog√≠a 2": ["Semana 1","Semana 2","Semana 3","Semana 4","Semana 5","Semana 6","Semana 7","Semana 8"],
  "Anatom√≠a General": ["Semana 1","Semana 2","Semana 3","Semana 4","Semana 5","Semana 6","Semana 7","Semana 8"],
  "Biolog√≠a Celular y Molecular": ["Semana 1","Semana 2","Semana 3","Semana 4","Semana 5","Semana 6","Semana 7","Semana 8"],
  "Bioqu√≠mica": ["Semana 1","Semana 2","Semana 3","Semana 4","Semana 5","Semana 6","Semana 7","Semana 8"]
};

function mostrarCursos(){
  const cursosList = document.getElementById('cursos-list');
  cursosList.innerHTML='';
  for(const c in cursos){
    const card = document.createElement('div');
    card.className='card';
    card.innerHTML=`<h3>${c}</h3><button onclick="abrirCurso('${c}')">Entrar</button>`;
    cursosList.appendChild(card);
  }
  showSection('cursos-container');
}

function abrirCurso(curso){
  cursoActual=curso;
  const subContainer=document.getElementById('subcurso-container');
  const title=document.getElementById('subcurso-title');
  const list=document.getElementById('subcurso-list');
  list.innerHTML='';
  title.innerText=`${curso} - Semanas`;
  cursos[curso].forEach((s,idx)=>{
    const card=document.createElement('div');
    card.className='card';
    card.innerHTML=`<h3>${s}</h3><button onclick="abrirSemana(${idx+1})">Ver contenido</button>`;
    list.appendChild(card);
  });
  showSection('subcurso-container');
}

function abrirSemana(semana){
  const semanaContainer=document.getElementById('semana-container');
  const title=document.getElementById('semana-title');
  title.innerText=`${cursoActual} - Semana ${semana}`;
  showSection('semana-container');
}

function volverACursos(){ mostrarCursos(); }
function volverASubcurso(){ showSection('subcurso-container'); }

</script>
</body>
</html>
<!-- ================= PARTE 2: CURSOS Y SUBCURSOS ================= -->
<div id="cursos-container" class="container hidden">
  <h2>Cursos Disponibles</h2>
  <div id="cursos-list" style="display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px;"></div>
</div>

<div id="subcurso-container" class="container hidden">
  <h2 id="subcurso-title"></h2>
  <div id="subcurso-list" style="display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px;"></div>
  <button onclick="volverACursos()" style="margin-top:20px; padding:10px 20px; background:#2563eb; color:white; border:none; border-radius:10px; cursor:pointer;">Volver a Cursos</button>
</div>

<div id="semana-container" class="container hidden">
  <h2 id="semana-title"></h2>
  <div id="semana-list" style="display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px;"></div>
  <button onclick="volverASubcurso()" style="margin-top:20px; padding:10px 20px; background:#2563eb; color:white; border:none; border-radius:10px; cursor:pointer;">Volver a Subcursos</button>
</div>

<script>
let cursoActual = '';
let subcursoActual = '';

// ================== CONTENIDO DE CURSOS ==================
const cursos = {
  "Morfofisiolog√≠a 1": {
    semanas: [
      {sem:1, fisiologia:"Membrana celular, receptores, canales, transporte y potenciales de membrana/acci√≥n. Regularizaci√≥n y se√±alizaci√≥n celular.", histologia:"Procesamiento histol√≥gico, membrana celular, organelas y n√∫cleo. Desarrollo embrionario del esqueleto y tejido cartilaginoso."},
      {sem:2, fisiologia:"Transmisi√≥n de se√±ales celulares. Composici√≥n y regulaci√≥n del medio interno, √≥smosis y l√≠quidos corporales.", histologia:"Tejido √≥seo y osificaci√≥n. Origen embrionario del sistema muscular y Tejido muscular I."},
      {sem:3, fisiologia:"Neurotransmisores, receptores y sinapsis. Contracci√≥n y excitaci√≥n muscular.", histologia:"Tejido muscular II. Neurohistog√©nesis y tejido nervioso."},
      {sem:4, fisiologia:"Metabolismo √≥seo. Evaluaci√≥n Parcial.", histologia:"Introducci√≥n al sistema vascular. Evaluaci√≥n Parcial."},
      {sem:5, fisiologia:"Sangre y sus propiedades, hematopoyesis, eritropoyesis y hemograma. Fisiolog√≠a eritrocitaria I (membrana, metabolismo y hemoglobina).", histologia:"Tejido epitelial de revestimiento. Tejido epitelial glandular."},
      {sem:6, fisiologia:"Fisiolog√≠a eritrocitaria II (hierro, Vit B12 y B9). Fisiolog√≠a plaquetaria, hemostasia y fibrin√≥lisis.", histologia:"Matriz extracelular, tejido conectivo y tejido adiposo. Tejido sangu√≠neo y hematopoyesis."},
      {sem:7, fisiologia:"Generalidades del sistema inmunol√≥gico, respuesta innata y fagocitosis. Inmunidad adquirida, linfocitos T y B, y grupos sangu√≠neos.", histologia:"Tejido linfoide y MALT. √ìrganos linfoides."},
      {sem:8, fisiologia:"Respuesta inflamatoria, tolerancia e hipersensibilidad. Evaluaci√≥n Final.", histologia:"Sistema tegumentario y sus anexos. Evaluaci√≥n Final."},
    ]
  },
  "Morfofisiolog√≠a 2": {
    subcursos: {
      "Anatom√≠a": [
        {sem:1, tema:"Pared tor√°cica, regi√≥n mamaria y radioanatom√≠a de t√≥rax."},
        {sem:2, tema:"Mediastino superior, anterior y medio (pericardio y morfolog√≠a externa)."},
        {sem:3, tema:"Mediastino medio II (morfolog√≠a interna y conducci√≥n) y radioanatom√≠a cardiaca."},
        {sem:4, tema:"Mediastino posterior y radioanatom√≠a del mediastino posterior. Examen Parcial."},
        {sem:5, tema:"Pulmones (segmentaci√≥n e inervaci√≥n) y radioanatom√≠a pulmonar."},
        {sem:6, tema:"Columna vertebral dorsal y m√∫sculos paravertebrales."},
        {sem:7, tema:"Radioanatom√≠a de columna tor√°cica, anatom√≠a del ri√±√≥n y v√≠as urinarias."},
        {sem:8, tema:"Radioanatom√≠a del ri√±√≥n y v√≠as urinarias. Examen Final."},
      ],
      "Fisiolog√≠a": [
        {sem:1, tema:"Hemodinamia y electrofisiolog√≠a cardiaca."},
        {sem:2, tema:"Electrocardiograma I, contracci√≥n y ciclo cardiaco."},
        {sem:3, tema:"Presi√≥n arterial, gasto cardiaco, retorno venoso y circulaciones especiales."},
        {sem:4, tema:"Mec√°nica respiratoria, vol√∫menes y capacidades. Examen Parcial."},
        {sem:5, tema:"Intercambio de gases, transporte de O‚ÇÇ/CO‚ÇÇ, control respiratorio y circulaci√≥n pulmonar."},
        {sem:6, tema:"Estructura renal, aclaramiento, filtraci√≥n glomerular, reabsorci√≥n y secreci√≥n renal."},
        {sem:7, tema:"Regulaci√≥n de electrolitos, volumen, equilibrio √°cido-base y diur√©ticos."},
        {sem:8, tema:"Fisiolog√≠a de la aviaci√≥n, grandes alturas y buceo profundo. Examen Final."},
      ],
      "Histolog√≠a": [
        {sem:1, tema:"Embriolog√≠a cardiovascular e histolog√≠a del coraz√≥n y v√°lvulas."},
        {sem:2, tema:"Histolog√≠a vascular (arterias, capilares, venas y linf√°ticos)."},
        {sem:3, tema:"Integraci√≥n de embriolog√≠a e histolog√≠a card√≠aca."},
        {sem:4, tema:"Integraci√≥n de histolog√≠a vascular. Examen Parcial."},
        {sem:5, tema:"Embriolog√≠a e histolog√≠a del aparato respiratorio (I y II)."},
        {sem:6, tema:"Embriolog√≠a urinaria e histolog√≠a del ri√±√≥n y la pelvis renal."},
        {sem:7, tema:"Histolog√≠a de ur√©ter, vejiga y uretra; malformaciones cong√©nitas renales."},
        {sem:8, tema:"Histopatolog√≠a renal y de las v√≠as urinarias. Examen Final."},
      ]
    }
  },
  "Anatom√≠a General": {
    semanas: [
      {sem:1, tema:"Hombro, Axila, Brazo y Codo."},
      {sem:2, tema:"Antebrazo, Mu√±eca y Mano."},
      {sem:3, tema:"Regi√≥n Gl√∫tea, Cadera, Muslo y Rodilla."},
      {sem:4, tema:"Pierna, Regi√≥n Popl√≠tea, Tobillo y Pie."},
      {sem:5, tema:"V√©rtebras cervicales, regiones y tri√°ngulos del cuello."},
      {sem:6, tema:"V√≠sceras del cuello, Cabeza √≥sea (Neuro/Viscerocr√°neo)."},
      {sem:7, tema:"M√∫sculos m√≠mica/masticaci√≥n y Regiones profundas de la cara."},
      {sem:8, tema:"Cavidad oral, fosas nasales y paredes de tronco."},
    ]
  },
  "Biolog√≠a Celular y Molecular": {
    subcursos:{
      "Teor√≠a":[
        {sem:1, tema:"Niveles de organizaci√≥n, Bioelementos, Enlaces qu√≠micos y Agua. Gl√∫cidos y L√≠pidos."},
        {sem:2, tema:"Amino√°cidos, Prote√≠nas y Enzimas. Dogma Central: Estructura del ADN y ARN."},
        {sem:3, tema:"La C√©lula: Evoluci√≥n (Proca vs. Euca) y Membrana Celular. Transporte de membrana (Pasivo/Activo)."},
        {sem:4, tema:"Citoesqueleto, Matriz Extracelular y Uniones celulares. Evaluaci√≥n Parcial."},
        {sem:5, tema:"Sistema de Endomembranas (RER, REL, Golgi) y Digesti√≥n Celular (Lisosomas/Peroxisomas). Mitocondrias y Bioenerg√©tica."},
        {sem:6, tema:"N√∫cleo Celular, Cromatina y Replicaci√≥n del ADN. Transcripci√≥n y Procesamiento de ARN."},
        {sem:7, tema:"Traducci√≥n (S√≠ntesis de Prote√≠nas). Ciclo Celular, Mitosis, Meiosis y Apoptosis."},
        {sem:8, tema:"Se√±alizaci√≥n celular, Introducci√≥n al C√°ncer y Gen√©tica Molecular. Evaluaci√≥n Final."},
      ],
      "Laboratorio":[
        {sem:1, tema:"Normas de Bioseguridad y Manejo del Microscopio. Identificaci√≥n de Gl√∫cidos y L√≠pidos."},
        {sem:2, tema:"Identificaci√≥n de Prote√≠nas y Enzimas. Extracci√≥n de ADN."},
        {sem:3, tema:"C√©lula Procariota y Eucariota. Permeabilidad de la Membrana Celular (Di√°lisis)."},
        {sem:4, tema:"Diversidad Celular y Diferenciaci√≥n. Evaluaci√≥n Parcial."},
        {sem:5, tema:"Fraccionamiento Celular. Respiraci√≥n Celular (Fermentaci√≥n)."},
        {sem:6, tema:"Observaci√≥n de N√∫cleo y Corp√∫sculo de Barr. Soluciones y Diluciones."},
        {sem:7, tema:"S√≠ntesis de Prote√≠nas (Simulaci√≥n). Mitosis y Meiosis (C√©lulas vegetales/animales)."},
        {sem:8, tema:"Tecnolog√≠a del ADN Recombinante (Simulaci√≥n). Evaluaci√≥n Final."},
      ]
    }
  },
  "Bioqu√≠mica": {
    subcursos:{
      "Teor√≠a":[
        {sem:1, tema:"Bioelementos y Biomol√©culas: Agua, pH, soluciones buffer, bioelementos y vitaminas. Estructuras supramoleculares."},
        {sem:2, tema:"Amino√°cidos y Prote√≠nas: Estructura, clasificaci√≥n y propiedades. Plegamiento y desnaturalizaci√≥n."},
        {sem:3, tema:"Enzimas y Cin√©tica: Energ√≠a de activaci√≥n y factores que afectan la actividad enzim√°tica. Evaluaci√≥n Continua 1."},
        {sem:4, tema:"Metabolismo de Carbohidratos: Glic√≥lisis, ciclo de la urea y degradaci√≥n de amino√°cidos. Evaluaci√≥n Parcial."},
        {sem:5, tema:"Gluc√≥geno y Bioenerg√©tica: S√≠ntesis/degradaci√≥n de gluc√≥geno, ciclo de Krebs y fosforilaci√≥n oxidativa."},
        {sem:6, tema:"Metabolismo de L√≠pidos: Lipog√©nesis, beta-oxidaci√≥n y s√≠ntesis de triglic√©ridos. Evaluaci√≥n Continua 2."},
        {sem:7, tema:"Colesterol y √Åcidos Nucleicos: S√≠ntesis de colesterol, estructura de ADN/ARN y replicaci√≥n."},
        {sem:8, tema:"S√≠ntesis de Prote√≠nas: Transcripci√≥n y traducci√≥n. Presentaci√≥n de situaci√≥n cl√≠nica. Evaluaci√≥n Final."},
      ],
      "Laboratorio":[
        {sem:1, tema:"Espectrofotometr√≠a: Principios de bioseguridad y determinaci√≥n de concentraci√≥n de compuestos."},
        {sem:2, tema:"Prote√≠nas totales: Determinaci√≥n de prote√≠nas totales, alb√∫mina y globulinas en suero."},
        {sem:3, tema:"Degradaci√≥n de prote√≠nas y factores que afectan la actividad enzim√°tica."},
        {sem:4, tema:"Concentraci√≥n de urea: Determinaci√≥n en suero e identificaci√≥n de biomol√©culas. Evaluaci√≥n Parcial."},
        {sem:5, tema:"Metabolismo en ayuno/postprandial: Evaluaci√≥n de rutas metab√≥licas en condiciones de alimentaci√≥n."},
        {sem:6, tema:"Digesti√≥n y Hidr√≥lisis: Digesti√≥n enzim√°tica del almid√≥n e hidr√≥lisis de l√≠pidos."},
        {sem:7, tema:"Perfil Lip√≠dico: Determinaci√≥n de triglic√©ridos, colesterol y lipoprote√≠nas en suero."},
        {sem:8, tema:"√Åcido √örico y ADN: Extracci√≥n de ADN y determinaci√≥n de √°cido √∫rico en suero. Evaluaci√≥n Final."},
      ]
    }
  };

// ================== FUNCIONES DE NAVEGACI√ìN ==================
function mostrarCursos(){
  document.getElementById('cursos-container').classList.remove('hidden');
  document.getElementById('subcurso-container').classList.add('hidden');
  document.getElementById('semana-container').classList.add('hidden');

  const cursosList = document.getElementById('cursos-list');
  cursosList.innerHTML = '';
  for(const curso in cursos){
    const card = document.createElement('div');
    card.className='card';
    card.innerHTML = `<h3>${curso}</h3>
      <button onclick="abrirCurso('${curso}')">Entrar al curso</button>`;
    cursosList.appendChild(card);
  }
}

function abrirCurso(curso){
  cursoActual = curso;
  const tieneSubcursos = cursos[curso].subcursos !== undefined;
  document.getElementById('cursos-container').classList.add('hidden');
  if(tieneSubcursos){
    mostrarSubcursos(curso);
  } else {
    mostrarSemanas(curso);
  }
}

function mostrarSubcursos(curso){
  document.getElementById('subcurso-container').classList.remove('hidden');
  document.getElementById('subcurso-title').innerText = `Subcursos de ${curso}`;
  const subcursoList = document.getElementById('subcurso-list');
  subcursoList.innerHTML='';
  const subcursos = Object.keys(cursos[curso].subcursos);
  subcursos.forEach(sc=>{
    const card = document.createElement('div');
    card.className='card';
    card.innerHTML=`<h3>${sc}</h3><button onclick="abrirSubcurso('${sc}')">Ver semanas</button>`;
    subcursoList.appendChild(card);
  });
}

function abrirSubcurso(subcurso){
  subcursoActual = subcurso;
  document.getElementById('subcurso-container').classList.add('hidden');
  mostrarSemanas(cursoActual, subcurso);
}

function volverACursos(){ mostrarCursos(); }
function volverASubcurso(){
  document.getElementById('semana-container').classList.add('hidden');
  mostrarSubcursos(cursoActual);
}
</script>
<!-- ================= PARTE 3: SEMANAS Y CONTENIDO ================= -->
<script>
// ================== FUNCIONES PARA MOSTRAR SEMANAS ==================
function mostrarSemanas(curso, subcurso){
  document.getElementById('semana-container').classList.remove('hidden');
  const semanaTitle = document.getElementById('semana-title');
  const semanaList = document.getElementById('semana-list');
  semanaList.innerHTML='';

  let semanas = [];
  if(subcurso){
    semanas = cursos[curso].subcursos[subcurso];
  } else {
    semanas = cursos[curso].semanas;
  }

  semanaTitle.innerText = subcurso ? `Semanas de ${subcurso}` : `Semanas de ${curso}`;

  semanas.forEach((s,i)=>{
    const card = document.createElement('div');
    card.className='card';
    let contenido = '';
    if(s.fisiologia && s.histologia){ // Para Morfofisiolog√≠a 1
      contenido = `<p><b>Fisiolog√≠a:</b> ${s.fisiologia}</p>
                   <p><b>Histolog√≠a:</b> ${s.histologia}</p>`;
    } else if(s.tema){
      contenido = `<p>${s.tema}</p>`;
    }
    card.innerHTML = `<h3>Semana ${s.sem || i+1}</h3>
                      ${contenido}
                      <button onclick="abrirRecurso('${curso}','${subcurso || ''}',${i},'video')">üìπ Ver Grabaci√≥n</button>
                      <button onclick="abrirRecurso('${curso}','${subcurso || ''}',${i},'pdf')">üìÑ Ver PDF</button>
                      <button onclick="abrirFormulario('${curso}','${subcurso || ''}',${i})">üìù Apliquemos lo aprendido</button>`;
    semanaList.appendChild(card);
  });
}

// ================== FUNCIONES DE RECURSOS ==================
function abrirRecurso(curso, subcurso, index, tipo){
  const semanas = subcurso ? cursos[curso].subcursos[subcurso] : cursos[curso].semanas;
  let mensaje = `Curso: ${curso}\n`;
  if(subcurso) mensaje += `Subcurso: ${subcurso}\n`;
  mensaje += `Semana: ${semanas[index].sem || index+1}\n`;
  mensaje += tipo === 'video' ? 'Aqu√≠ se abrir√≠a la grabaci√≥n.' : 'Aqu√≠ se abrir√≠a el PDF.';
  alert(mensaje);
}

// ================== FORMULARIO ‚ÄúAPLIQUEMOS LO APRENDIDO‚Äù ==================
let respuestasAlumno = {}; // Guardar respuestas de cada alumno

function abrirFormulario(curso, subcurso, index){
  const semanas = subcurso ? cursos[curso].subcursos[subcurso] : cursos[curso].semanas;
  const semana = semanas[index];
  const formularioHtml = `
    <div class="container">
      <h2>Formulario: Semana ${semana.sem || index+1}</h2>
      <p>Curso: ${curso} ${subcurso ? '| Subcurso: '+subcurso : ''}</p>
      <label>Pregunta 1: ¬øQu√© aprendiste esta semana?</label><br>
      <input type="text" id="resp1" style="width:100%; padding:8px; margin-bottom:10px;"><br>
      <label>Pregunta 2: ¬øQu√© fue m√°s dif√≠cil?</label><br>
      <input type="text" id="resp2" style="width:100%; padding:8px; margin-bottom:10px;"><br>
      <button onclick="guardarFormulario('${curso}','${subcurso || ''}',${index})">Enviar Respuestas</button>
      <button onclick="cerrarFormulario()" style="margin-left:10px; background:#555;">Cerrar</button>
    </div>
  `;
  const semanaList = document.getElementById('semana-list');
  semanaList.innerHTML = formularioHtml;
}

function guardarFormulario(curso, subcurso, index){
  const resp1 = document.getElementById('resp1').value;
  const resp2 = document.getElementById('resp2').value;
  const key = `${curso}-${subcurso}-${index}`;
  respuestasAlumno[key] = {resp1, resp2};
  alert('Respuestas guardadas correctamente');
  mostrarSemanas(curso, subcurso);
}

function cerrarFormulario(){
  mostrarSemanas(cursoActual, subcursoActual);
}

// ================== ADMIN: VER AVANCE ==================
function verAvance(){
  if(!isAdmin) return alert('Solo administradores pueden ver el avance');
  let texto = 'Avance de los alumnos:\n';
  for(const key in respuestasAlumno){
    texto += `${key}: \nRespuesta 1: ${respuestasAlumno[key].resp1}\nRespuesta 2: ${respuestasAlumno[key].resp2}\n\n`;
  }
  if(Object.keys(respuestasAlumno).length===0) texto+='No hay respuestas a√∫n';
  alert(texto);
}
</script>
<!-- ================= PARTE 4: ADMINISTRACI√ìN ================= -->
<script>
// ================== CONFIGURACI√ìN ADMIN ==================
const isAdmin = auth.currentUser && auth.currentUser.email === 'jamesucribanco333@gmail.com';

// Funci√≥n para mostrar panel de admin
function mostrarPanelAdmin(){
  if(!isAdmin) return;
  
  const container = document.getElementById('cursos-list');
  container.innerHTML = '<h2>Panel de Administrador</h2>';

  // Botones de acci√≥n
  const btnAgregarCurso = document.createElement('button');
  btnAgregarCurso.innerText = '‚ûï Agregar Curso';
  btnAgregarCurso.style.background = '#16a34a';
  btnAgregarCurso.onclick = mostrarFormularioAgregarCurso;
  container.appendChild(btnAgregarCurso);

  const btnVerAvance = document.createElement('button');
  btnVerAvance.innerText = 'üìä Ver Avance Alumnos';
  btnVerAvance.style.background = '#2563eb';
  btnVerAvance.style.marginLeft='10px';
  btnVerAvance.onclick = verAvance;
  container.appendChild(btnVerAvance);

  // Mostrar lista de cursos actuales
  mostrarCursos();
}

// ================== FORMULARIO AGREGAR CURSO ==================
function mostrarFormularioAgregarCurso(){
  const container = document.getElementById('cursos-list');
  container.innerHTML = `
    <h2>Agregar Nuevo Curso</h2>
    <label>Nombre del Curso:</label><br>
    <input type="text" id="nuevo-curso-nombre" style="width:100%; padding:8px; margin-bottom:10px;"><br>
    <label>Subcursos (separados por coma, opcional):</label><br>
    <input type="text" id="nuevo-curso-subcursos" style="width:100%; padding:8px; margin-bottom:10px;"><br>
    <button onclick="agregarCurso()">Guardar Curso</button>
    <button onclick="mostrarPanelAdmin()" style="margin-left:10px; background:#555;">Cancelar</button>
  `;
}

// ================== FUNCION AGREGAR CURSO ==================
function agregarCurso(){
  const nombre = document.getElementById('nuevo-curso-nombre').value.trim();
  const subcursosInput = document.getElementById('nuevo-curso-subcursos').value.trim();
  if(!nombre) return alert('Debes ingresar un nombre de curso');
  
  if(subcursosInput){
    const subcursosArr = subcursosInput.split(',').map(s=>s.trim());
    cursos[nombre] = {subcursos:{}};
    subcursosArr.forEach(sc => cursos[nombre].subcursos[sc]=[]);
  } else {
    cursos[nombre] = {semanas:[]};
  }
  alert(`Curso "${nombre}" agregado correctamente`);
  mostrarPanelAdmin();
}

// ================== ADMIN: AGREGAR SEMANA, GRABACION, PDF Y PREGUNTAS ==================
function mostrarFormularioAgregarSemana(curso, subcurso=null){
  const semanaList = document.getElementById('semana-list');
  semanaList.innerHTML = `
    <h2>Agregar Semana</h2>
    <label>Contenido Fisiolog√≠a/Teor√≠a:</label><br>
    <textarea id="semana-fisiologia" style="width:100%; height:60px; margin-bottom:10px;"></textarea><br>
    <label>Contenido Histolog√≠a/Laboratorio:</label><br>
    <textarea id="semana-histologia" style="width:100%; height:60px; margin-bottom:10px;"></textarea><br>
    <label>URL Grabaci√≥n:</label><br>
    <input type="text" id="semana-video" style="width:100%; margin-bottom:10px;"><br>
    <label>URL PDF:</label><br>
    <input type="text" id="semana-pdf" style="width:100%; margin-bottom:10px;"><br>
    <button onclick="guardarSemana('${curso}','${subcurso || ''}')">Guardar Semana</button>
    <button onclick="mostrarPanelAdmin()" style="margin-left:10px; background:#555;">Cancelar</button>
  `;
}

function guardarSemana(curso, subcurso){
  const f = document.getElementById('semana-fisiologia').value.trim();
  const h = document.getElementById('semana-histologia').value.trim();
  const v = document.getElementById('semana-video').value.trim();
  const p = document.getElementById('semana-pdf').value.trim();

  const semanaObj = {sem:(subcurso ? cursos[curso].subcursos[subcurso].length+1 : cursos[curso].semanas.length+1)};
  if(f) semanaObj.fisiologia=f;
  if(h) semanaObj.histologia=h;
  if(v) semanaObj.video=v;
  if(p) semanaObj.pdf=p;

  if(subcurso){
    cursos[curso].subcursos[subcurso].push(semanaObj);
  } else {
    cursos[curso].semanas.push(semanaObj);
  }
  alert('Semana agregada correctamente');
  mostrarPanelAdmin();
}

// ================== ADMIN: VER RESPUESTAS ==================
function verRespuestasAlumno(curso, subcurso){
  if(!isAdmin) return alert('Solo admin puede ver respuestas');
  let texto = `Respuestas de alumnos - ${curso} ${subcurso? '| Subcurso: '+subcurso : ''}\n`;
  for(const key in respuestasAlumno){
    if(key.includes(curso) && (!subcurso || key.includes(subcurso))){
      texto += `${key}:\n  Pregunta 1: ${respuestasAlumno[key].resp1}\n  Pregunta 2: ${respuestasAlumno[key].resp2}\n\n`;
    }
  }
  alert(texto || 'No hay respuestas a√∫n');
}

// ================== SOBRE CARGA DEL LOGIN ==================
onAuthStateChanged(auth, async (user) => {
  if(user){
    if(user.email === 'jamesucribanco333@gmail.com'){
      mostrarPanelAdmin();
    } else {
      mostrarCursos();
    }
  } else {
    // Usuario no logueado
    document.getElementById('cursos-list').innerHTML='';
  }
});
</script>
<!-- ================== PARTE 6: ADMIN Y FORMULARIOS ================== -->
<!-- Contenedor de administraci√≥n -->
<div id="admin-container" class="container hidden">
  <h2>Panel de Administraci√≥n</h2>
  
  <p>Bienvenido, administrador. Aqu√≠ puedes gestionar cursos, subcursos, semanas, grabaciones, PDFs y formularios.</p>

  <!-- Agregar contenido a un curso -->
  <div id="admin-cursos" class="card">
    <h3>Agregar/Editar contenido de un curso</h3>
    <label for="admin-curso-select">Selecciona un curso:</label>
    <select id="admin-curso-select">
      <option value="">--Selecciona curso--</option>
    </select>
    <br><br>

    <label for="admin-subcurso-select">Selecciona subcurso (si aplica):</label>
    <select id="admin-subcurso-select">
      <option value="">--Selecciona subcurso--</option>
    </select>
    <br><br>

    <label for="admin-semana">Semana:</label>
    <input type="number" id="admin-semana" min="1" max="8">
    <br><br>

    <label for="admin-grabacion">URL Grabaci√≥n:</label>
    <input type="text" id="admin-grabacion" placeholder="https://...">
    <br><br>

    <label for="admin-pdf">URL PDF:</label>
    <input type="text" id="admin-pdf" placeholder="https://...">
    <br><br>

    <label for="admin-aplicar">Preguntas (JSON array):</label>
    <textarea id="admin-aplicar" placeholder='[{"pregunta":"¬øQu√© es...?","opciones":["a","b","c"],"correcta":"a"}]' rows="5" style="width:100%;"></textarea>
    <br><br>

    <button onclick="guardarContenidoAdmin()">Guardar contenido</button>
  </div>

  <!-- Ver respuestas y avance de alumnos -->
  <div id="admin-avance" class="card" style="margin-top:30px;">
    <h3>Avance y respuestas de alumnos</h3>
    <div id="admin-respuestas">
      <!-- Tabla de progreso se generar√° aqu√≠ -->
    </div>
  </div>
</div>

<script>
  // Verificar si usuario es admin
  onAuthStateChanged(auth, async (user) => {
    if(user && user.email === "jamesucribanco333@gmail.com") {
      document.getElementById('admin-container').classList.remove('hidden');
    } else {
      document.getElementById('admin-container').classList.add('hidden');
    }
  });

  // Llenar selects de cursos y subcursos
  const cursoSelect = document.getElementById('admin-curso-select');
  const subcursoSelect = document.getElementById('admin-subcurso-select');

  function actualizarCursosAdmin() {
    cursoSelect.innerHTML = '<option value="">--Selecciona curso--</option>';
    for(const curso in cursos){
      const option = document.createElement('option');
      option.value = curso;
      option.innerText = curso;
      cursoSelect.appendChild(option);
    }
    subcursoSelect.innerHTML = '<option value="">--Selecciona subcurso--</option>';
  }
  actualizarCursosAdmin();

  cursoSelect.addEventListener('change', () => {
    const curso = cursoSelect.value;
    subcursoSelect.innerHTML = '<option value="">--Selecciona subcurso--</option>';
    if(cursos[curso] && cursos[curso].subcursos){
      Object.keys(cursos[curso].subcursos).forEach(sc => {
        const option = document.createElement('option');
        option.value = sc;
        option.innerText = sc;
        subcursoSelect.appendChild(option);
      });
    }
  });

  // Guardar contenido desde admin
  function guardarContenidoAdmin() {
    const curso = cursoSelect.value;
    const subcurso = subcursoSelect.value || null;
    const semana = parseInt(document.getElementById('admin-semana').value);
    const grabacion = document.getElementById('admin-grabacion').value;
    const pdf = document.getElementById('admin-pdf').value;
    const preguntasJSON = document.getElementById('admin-aplicar').value;

    if(!curso || !semana) { alert("Selecciona curso y semana"); return; }

    let semanaObj;
    if(subcurso){
      semanaObj = cursos[curso].subcursos[subcurso].find(s => s.sem === semana);
      if(!semanaObj){
        semanaObj = {sem: semana};
        cursos[curso].subcursos[subcurso].push(semanaObj);
      }
    } else {
      semanaObj = cursos[curso].semanas.find(s => s.sem === semana);
      if(!semanaObj){
        semanaObj = {sem: semana};
        cursos[curso].semanas.push(semanaObj);
      }
    }

    if(grabacion) semanaObj.grabacion = grabacion;
    if(pdf) semanaObj.pdf = pdf;
    if(preguntasJSON){
      try {
        semanaObj.aplicar = JSON.parse(preguntasJSON);
      } catch(e){
        alert("JSON de preguntas inv√°lido");
        return;
      }
    }

    alert("Contenido guardado exitosamente");
  }

  // Funci√≥n para ver respuestas de alumnos (simulaci√≥n)
  function mostrarAvanceAlumnos() {
    const container = document.getElementById('admin-respuestas');
    container.innerHTML = "";
    // Simulaci√≥n: sacamos los datos de Firestore
    getDocs(collection(db, 'usuarios')).then(snapshot => {
      snapshot.forEach(doc => {
        const data = doc.data();
        const div = document.createElement('div');
        div.className = "card";
        div.innerHTML = `<h4>${data.nombre} (${data.email})</h4>`;
        if(data.respuestas){
          const table = document.createElement('table');
          table.style.width = "100%";
          table.style.borderCollapse = "collapse";
          table.innerHTML = "<tr style='background:#2563eb; color:white;'><th>Curso</th><th>Semana</th><th>Pregunta</th><th>Respuesta</th><th>Correcta</th></tr>";
          data.respuestas.forEach(r => {
            const tr = document.createElement('tr');
            tr.innerHTML = `<td>${r.curso}</td><td>${r.semana}</td><td>${r.pregunta}</td><td>${r.respuesta}</td><td>${r.correcta}</td>`;
            tr.style.borderBottom = '1px solid #ddd';
            table.appendChild(tr);
          });
          div.appendChild(table);
        } else {
          div.innerHTML += "<p>No hay respuestas registradas</p>";
        }
        container.appendChild(div);
      });
    });
  }

  // Llamar funci√≥n cada vez que se abra admin
  onAuthStateChanged(auth, user => {
    if(user && user.email === "jamesucribanco333@gmail.com"){
      mostrarAvanceAlumnos();
    }
  });
</script>
</body>
</html>
