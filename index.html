<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Neurova P53</title>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

  <style>
    body { margin:0; font-family: 'Segoe UI', sans-serif; background:#f8fbff; color:#1f2937; }
    header { background: linear-gradient(90deg,#e0f2fe,#bae6fd,#93c5fd); padding:20px 40px; display:flex; justify-content:space-between; align-items:center;}
    header h1 { margin:0; color:#0f172a; font-size:28px; letter-spacing:1px;}
    nav a { margin-left:20px; text-decoration:none; color:#0f172a; font-weight:500; cursor:pointer;}
    .container { max-width:1100px; margin:40px auto; padding:0 20px;}
    .card { background:white; border-radius:16px; box-shadow:0 10px 30px rgba(0,0,0,0.08); padding:20px; margin-bottom:20px;}
    .card h3 { color:#0077cc;}
    .card button { margin-top:10px; padding:10px 18px; border:none; border-radius:20px; background:#0077cc; color:white; cursor:pointer;}
    .card button.blocked { background:#ccc; color:#555; cursor:not-allowed;}
    .hidden { display:none; }
    table { width:100%; border-collapse:collapse; margin-top:10px;}
    th, td { border:1px solid #cbd5f5; padding:8px; text-align:left;}
    th { background:#2563eb; color:white;}
    footer { text-align:center; padding:30px; color:#64748b;}
  </style>
</head>

<body>

  <!-- HEADER -->
  <header>
    <h1>Neurova P53</h1>
    <nav>
      <a onclick="showSection('inicio')">Inicio</a>
      <a onclick="showSection('cursos')">Cursos</a>
      <a onclick="showSection('horario')">Horario</a>
    </nav>
  </header>

  <div class="container">

    <!-- LOGIN -->
    <div id="login" class="card">
      <h2>Iniciar sesi√≥n con Google</h2>
      <button id="google-login">Entrar con Google</button>
    </div>

    <!-- PANEL ALUMNO -->
    <div id="alumno-panel" class="hidden">
      <h2>Bienvenido <span id="alumno-nombre"></span></h2>
      <div id="horario-alumno"></div>
      <div id="cursos-alumno"></div>
    </div>

    <!-- PANEL ADMIN -->
    <div id="admin-panel" class="hidden">
      <h2>Panel del Administrador</h2>
      <div id="horario-todos"></div>
      <div id="cursos-admin"></div>
    </div>

  </div>

  <footer>
    ¬© 2026 Neurova P53 ¬∑ Educaci√≥n con base cient√≠fica
  </footer>

<script>
  // ------------------- FIREBASE CONFIG -------------------
  const firebaseConfig = {
    apiKey: "TU_API_KEY",
    authDomain: "TU_AUTH_DOMAIN",
    projectId: "TU_PROJECT_ID",
    storageBucket: "TU_STORAGE_BUCKET",
    messagingSenderId: "TU_MESSAGING_SENDER_ID",
    appId: "TU_APP_ID"
  };
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();

  // ------------------- LOGIN GOOGLE -------------------
  document.getElementById('google-login').addEventListener('click', ()=>{
    const provider = new firebase.auth.GoogleAuthProvider();
    auth.signInWithPopup(provider)
      .then(result=>{
        const user = result.user;
        // Crear documento si no existe
        const userDoc = db.collection('usuarios').doc(user.uid);
        userDoc.get().then(doc=>{
          if(!doc.exists){
            userDoc.set({
              nombre: user.displayName,
              role: 'alumno',
              horario: {}
            });
          }
          const role = doc.exists ? doc.data().role : 'alumno';
          setupPanel(user.displayName, role, user.uid);
        });
      }).catch(err=>{
        console.error(err);
        alert('Error al iniciar sesi√≥n');
      });
  });

  // ------------------- PANEL SEGUN ROL -------------------
  function setupPanel(nombre, role, uid){
    document.getElementById('login').classList.add('hidden');
    if(role==='admin'){
      document.getElementById('admin-panel').classList.remove('hidden');
      loadAdmin(uid);
    } else {
      document.getElementById('alumno-nombre').innerText = nombre;
      document.getElementById('alumno-panel').classList.remove('hidden');
      loadAlumno(uid);
    }
  }

  // ------------------- ALUMNO -------------------
  const cursos = [
    {
      nombre: "Morfofisiolog√≠a I",
      semanas:[
        {sem:1, fisiologia:"Membrana celular, receptores, canales...", histologia:"Procesamiento histol√≥gico, membrana, organelas..."},
        {sem:2, fisiologia:"Transmisi√≥n de se√±ales...", histologia:"Tejido √≥seo y muscular..."},
        {sem:3, fisiologia:"Neurotransmisores y sinapsis...", histologia:"Tejido muscular II y nervioso..."},
        {sem:4, fisiologia:"Metabolismo √≥seo. Parcial", histologia:"Sistema vascular. Parcial"},
        {sem:5, fisiologia:"Sangre y sus propiedades...", histologia:"Tejido epitelial y glandular"},
        {sem:6, fisiologia:"Fisiolog√≠a eritrocitaria II, hemostasia", histologia:"Matriz extracelular, tejido conectivo..."},
        {sem:7, fisiologia:"Sistema inmune, fagocitosis...", histologia:"Tejido linfoide, √≥rganos linfoides"},
        {sem:8, fisiologia:"Respuesta inflamatoria, evaluaci√≥n final", histologia:"Sistema tegumentario. Final"}
      ]
    },
    {
      nombre: "Morfofisiolog√≠a II",
      semanas:[
        {sem:1, anatomia:"Pared tor√°cica, regi√≥n mamaria...", fisiologia:"Hemodinamia y electrofisiolog√≠a", histologia:"Embriolog√≠a cardiovascular"},
        {sem:2, anatomia:"Mediastino superior, anterior y medio", fisiologia:"Electrocardiograma I...", histologia:"Histolog√≠a vascular"},
        {sem:3, anatomia:"Mediastino medio II...", fisiologia:"Presi√≥n arterial, gasto cardiaco...", histologia:"Integraci√≥n embriolog√≠a e histolog√≠a card√≠aca"},
        {sem:4, anatomia:"Mediastino posterior, examen parcial", fisiologia:"Mec√°nica respiratoria. Parcial", histologia:"Integraci√≥n histolog√≠a vascular. Parcial"},
        {sem:5, anatomia:"Pulmones, radioanatom√≠a pulmonar", fisiologia:"Intercambio de gases, transporte O2/CO2", histologia:"Embriolog√≠a e histolog√≠a respiratorio"},
        {sem:6, anatomia:"Columna vertebral dorsal", fisiologia:"Filtraci√≥n y funci√≥n renal", histologia:"Embriolog√≠a urinaria e histolog√≠a ri√±√≥n"},
        {sem:7, anatomia:"Columna tor√°cica y ri√±√≥n", fisiologia:"Electrolitos, equilibrio √°cido-base", histologia:"Histolog√≠a ur√©ter, vejiga, uretra"},
        {sem:8, anatomia:"Ri√±√≥n y v√≠as urinarias. Examen final", fisiologia:"Fisiolog√≠a aviaci√≥n/buceo", histologia:"Histopatolog√≠a renal"}
      ]
    },
    {
      nombre: "Anatom√≠a General",
      semanas:[
        {sem:1, tema:"Hombro, Axila, Brazo y Codo"},
        {sem:2, tema:"Antebrazo, Mu√±eca y Mano"},
        {sem:3, tema:"Regi√≥n Gl√∫tea, Cadera, Muslo y Rodilla"},
        {sem:4, tema:"Pierna, Tobillo y Pie"},
        {sem:5, tema:"V√©rtebras cervicales y cuello"},
        {sem:6, tema:"Cabeza y v√≠sceras del cuello"},
        {sem:7, tema:"M√∫sculos de la cara y regi√≥n profunda"},
        {sem:8, tema:"Cavidad oral, fosas nasales, tronco"}
      ]
    },
    {
      nombre: "Biolog√≠a Celular y Molecular",
      semanas:[
        {sem:1, teoria:"Niveles de organizaci√≥n, Bioelementos...", laboratorio:"Normas de bioseguridad, microscopio"},
        {sem:2, teoria:"Amino√°cidos, prote√≠nas y enzimas...", laboratorio:"Extracci√≥n de ADN, identificaci√≥n prote√≠nas"},
        {sem:3, teoria:"La c√©lula y membrana", laboratorio:"Permeabilidad membrana"},
        {sem:4, teoria:"Citoesqueleto, matriz extracelular...", laboratorio:"Diversidad celular, evaluaci√≥n parcial"},
        {sem:5, teoria:"Endomembranas y digesti√≥n celular", laboratorio:"Fraccionamiento celular"},
        {sem:6, teoria:"N√∫cleo y replicaci√≥n ADN", laboratorio:"Observaci√≥n n√∫cleo y corp√∫sculo de Barr"},
        {sem:7, teoria:"Traducci√≥n y ciclo celular", laboratorio:"S√≠ntesis prote√≠nas, mitosis y meiosis"},
        {sem:8, teoria:"Se√±alizaci√≥n celular, gen√©tica molecular", laboratorio:"ADN recombinante, evaluaci√≥n final"}
      ]
    },
    {
      nombre: "Bioqu√≠mica",
      semanas:[
        {sem:1, teoria:"Bioelementos y biomol√©culas...", laboratorio:"Espectrofotometr√≠a y concentraci√≥n de compuestos"},
        {sem:2, teoria:"Amino√°cidos y prote√≠nas", laboratorio:"Determinaci√≥n prote√≠nas totales"},
        {sem:3, teoria:"Enzimas y cin√©tica", laboratorio:"Degradaci√≥n de prote√≠nas"},
        {sem:4, teoria:"Metabolismo carbohidratos", laboratorio:"Concentraci√≥n urea y biomol√©culas"},
        {sem:5, teoria:"Gluc√≥geno y bioenerg√©tica", laboratorio:"Metabolismo ayuno/postprandial"},
        {sem:6, teoria:"Metabolismo l√≠pidos", laboratorio:"Digesti√≥n e hidr√≥lisis de l√≠pidos"},
        {sem:7, teoria:"Colesterol y √°cidos nucleicos", laboratorio:"Perfil lip√≠dico"},
        {sem:8, teoria:"S√≠ntesis de prote√≠nas", laboratorio:"√Åcido √∫rico y ADN, evaluaci√≥n final"}
      ]
    }
  ];

  function loadAlumno(uid){
    const div = document.getElementById('cursos-alumno');
    div.innerHTML = '';
    cursos.forEach(curso=>{
      const card = document.createElement('div'); card.className='card';
      const title = document.createElement('h3'); title.innerText=curso.nombre; card.appendChild(title);
      const btn = document.createElement('button'); btn.innerText='Entrar al curso'; card.appendChild(btn);
      btn.onclick=()=>{ showCursoAlumno(curso); }
      div.appendChild(card);
    });
    // Horario ejemplo
    db.collection('usuarios').doc(uid).get().then(doc=>{
      const data = doc.data();
      if(data.horario){
        let html = `<h3>Horario semanal</h3><table><tr><th>D√≠a</th><th>Cursos</th></tr>`;
        for(const dia in data.horario){
          html+=`<tr><td>${dia}</td><td>${data.horario[dia].join(', ')}</td></tr>`;
        }
        html+='</table>';
        document.getElementById('horario-alumno').innerHTML = html;
      }
    });
  }

  function showCursoAlumno(curso){
    const div = document.getElementById('cursos-alumno');
    div.innerHTML='';
    const back = document.createElement('button'); back.innerText='‚Üê Volver'; back.onclick=()=>{ loadAlumno(auth.currentUser.uid);}; div.appendChild(back);
    curso.semanas.forEach(s=>{
      const card = document.createElement('div'); card.className='card';
      let contenido='';
      if(s.tema) contenido=`Semana ${s.sem}: ${s.tema}`;
      else if(s.fisiologia && s.histologia) contenido=`Semana ${s.sem}:\nFisiolog√≠a: ${s.fisiologia}\nHistolog√≠a: ${s.histologia}`;
      else if(s.teoria && s.laboratorio) contenido=`Semana ${s.sem}:\nTeor√≠a: ${s.teoria}\nLaboratorio: ${s.laboratorio}`;
      else if(s.anatomia) contenido=`Semana ${s.sem}:\nAnatom√≠a: ${s.anatomia}\nFisiolog√≠a: ${s.fisiologia}\nHistolog√≠a: ${s.histologia}`;
      const p = document.createElement('p'); p.innerText=contenido; card.appendChild(p);
      const pdf = document.createElement('button'); pdf.innerText='üìÑ PDF'; card.appendChild(pdf);
      const video = document.createElement('button'); video.innerText='üé• Video'; card.appendChild(video);
      const banco = document.createElement('button'); banco.innerText='üìù Apliquemos lo aprendido'; card.appendChild(banco);
      div.appendChild(card);
    });
  }

  // ------------------- ADMIN -------------------
  function loadAdmin(uid){
    const divCursos = document.getElementById('cursos-admin');
    divCursos.innerHTML='<h3>Cursos (solo visualizaci√≥n)</h3>';
    cursos.forEach(curso=>{
      const card = document.createElement('div'); card.className='card';
      card.innerHTML=`<h3>${curso.nombre}</h3>`;
      divCursos.appendChild(card);
    });

    // Mostrar horarios de todos los alumnos
    const divHorarios = document.getElementById('horario-todos');
    divHorarios.innerHTML='<h3>Horarios de todos los alumnos</h3>';
    db.collection('usuarios').get().then(snapshot=>{
      snapshot.forEach(doc=>{
        const data = doc.data();
        const card = document.createElement('div'); card.className='card';
        let html = `<h4>${data.nombre} (${data.role})</h4>`;
        if(data.horario){
          html+=`<table><tr><th>D√≠a</th><th>Cursos</th></tr>`;
          for(const dia in data.horario){
            html+=`<tr><td>${dia}</td><td>${data.horario[dia].join(', ')}</td></tr>`;
          }
          html+='</table>';
        }
        card.innerHTML = html;
        divHorarios.appendChild(card);
      });
    });
  }

  // ------------------- NAVEGACI√ìN -------------------
  function showSection(id){
    document.getElementById('alumno-panel').classList.add('hidden');
    document.getElementById('admin-panel').classList.add('hidden');
    if(id==='inicio'){
      if(auth.currentUser){
        const uid=auth.currentUser.uid;
        db.collection('usuarios').doc(uid).get().then(doc=>{
          if(doc.exists){
            if(doc.data().role==='admin') document.getElementById('admin-panel').classList.remove('hidden');
            else document.getElementById('alumno-panel').classList.remove('hidden');
          }
        });
      }
    } else if(id==='cursos'){
      if(auth.currentUser){
        const uid=auth.currentUser.uid;
        db.collection('usuarios').doc(uid).get().then(doc=>{
          if(doc.exists){
            if(doc.data().role==='admin') document.getElementById('cursos-admin').scrollIntoView();
            else document.getElementById('cursos-alumno').scrollIntoView();
          }
        });
      }
    } else if(id==='horario'){
      if(auth.currentUser){
        const uid=auth.currentUser.uid;
        db.collection('usuarios').doc(uid).get().then(doc=>{
          if(doc.exists){
            if(doc.data().role==='admin') document.getElementById('horario-todos').scrollIntoView();
            else document.getElementById('horario-alumno').scrollIntoView();
          }
        });
      }
    }
  }
</script>
</body>
</html>
