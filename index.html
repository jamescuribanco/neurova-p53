<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Neurova P53</title>

  <!-- Estilos generales -->
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
      background: #f8fbff;
      color: #1f2937;
    }

    header {
      background: linear-gradient(90deg, #e0f2fe, #bae6fd, #93c5fd);
      padding: 20px 40px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    header h1 {
      margin: 0;
      color: #0f172a;
      font-size: 28px;
      letter-spacing: 1px;
    }

    nav a {
      margin-left: 20px;
      text-decoration: none;
      color: #0f172a;
      font-weight: 500;
    }

    .container {
      max-width: 1100px;
      margin: 40px auto;
      padding: 0 20px;
    }

    .card {
      background: white;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.08);
      padding: 30px;
      margin-bottom: 20px;
      text-align: center;
    }

    .card h3 {
      color: #0077cc;
    }

    button {
      margin-top: 15px;
      padding: 12px 20px;
      border: none;
      border-radius: 12px;
      background: #0077cc;
      color: white;
      cursor: pointer;
    }

    button:hover {
      background: #005fa3;
    }

    .hidden {
      display: none;
    }

    .blocked {
      background: #ccc;
      color: #555;
      cursor: not-allowed;
    }

    footer {
      text-align: center;
      padding: 30px;
      color: #64748b;
    }

    .subcurso-btn {
      background: #f97316;
    }

    .subcurso-btn:hover {
      background: #ea580c;
    }

    h2 {
      color: #1e3a8a;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
<!-- HEADER CON LOGO Y NAVEGACI√ìN -->
<header>
  <img src="logo.jpeg" alt="Neurova P53" style="height:90px;">
  <h1>Neurova P53</h1>
  <nav>
    <a href="#" onclick="showSection('inicio')">Inicio</a>
    <a href="#" onclick="showSection('cursos')">Cursos</a>
    <a href="#" onclick="showSection('material')">Material</a>
  </nav>
</header>

<div class="container">

  <!-- LOGIN CON GOOGLE -->
  <div id="login" class="card">
    <h2>Iniciar sesi√≥n</h2>
    <button id="login-google">Login con Google</button>
  </div>
<!-- CONTENEDOR DE CURSOS Y CONTENIDO -->
<div id="contenido" class="hidden">

  <!-- INICIO -->
  <div id="inicio">
    <h2>Bienvenido a Neurova P53</h2>
    <p>Academia premium especializada en ciencias de la salud. Formaci√≥n rigurosa, clara y progresiva, dise√±ada por ciclos acad√©micos.</p>
  </div>

  <!-- CURSOS -->
  <div id="lista-cursos" class="hidden">
    <h2>Mis cursos</h2>
    <!-- Aqu√≠ se van a generar los cursos din√°micamente con JS -->
  </div>

  <!-- DETALLE DEL CURSO -->
  <div id="detalle-curso" class="hidden">
    <button onclick="volverACursos()">‚¨Ö Volver a cursos</button>
    <h2 id="curso-titulo"></h2>
    <div id="subcursos" class="hidden"></div>
    <div id="semanas" class="hidden"></div>
  </div>

</div>
<!-- CURSOS COMPLETOS -->
<script>
  // DATOS DE CURSOS
  const cursos = {
    "Morfofisiolog√≠a I": {
      semanas: [
        {sem:1, fisiologia:"Membrana celular, receptores, canales, transporte y potenciales de membrana/acci√≥n. Regularizaci√≥n y se√±alizaci√≥n celular.", histologia:"Procesamiento histol√≥gico, membrana celular, organelas y n√∫cleo. Desarrollo embrionario del esqueleto y tejido cartilaginoso."},
        {sem:2, fisiologia:"Transmisi√≥n de se√±ales celulares. Composici√≥n y regulaci√≥n del medio interno, √≥smosis y l√≠quidos corporales.", histologia:"Tejido √≥seo y osificaci√≥n. Origen embrionario del sistema muscular y Tejido muscular I."},
        {sem:3, fisiologia:"Neurotransmisores, receptores y sinapsis. Contracci√≥n y excitaci√≥n muscular.", histologia:"Tejido muscular II. Neurohistog√©nesis y tejido nervioso."},
        {sem:4, fisiologia:"Metabolismo √≥seo. Evaluaci√≥n Parcial.", histologia:"Introducci√≥n al sistema vascular. Evaluaci√≥n Parcial."},
        {sem:5, fisiologia:"Sangre y sus propiedades, hematopoyesis, eritropoyesis y hemograma. Fisiolog√≠a eritrocitaria I (membrana, metabolismo y hemoglobina).", histologia:"Tejido epitelial de revestimiento. Tejido epitelial glandular."},
        {sem:6, fisiologia:"Fisiolog√≠a eritrocitaria II (hierro, Vit B12 y B9). Fisiolog√≠a plaquetaria, hemostasia y fibrin√≥lisis.", histologia:"Matriz extracelular, tejido conectivo y tejido adiposo. Tejido sangu√≠neo y hematopoyesis."},
        {sem:7, fisiologia:"Generalidades del sistema inmunol√≥gico, respuesta innata y fagocitosis. Inmunidad adquirida, linfocitos T y B, y grupos sangu√≠neos.", histologia:"Tejido linfoide y MALT. √ìrganos linfoides."},
        {sem:8, fisiologia:"Respuesta inflamatoria, tolerancia e hipersensibilidad. Evaluaci√≥n Final.", histologia:"Sistema tegumentario y sus anexos. Evaluaci√≥n Final."}
      ]
    },

    "Morfofisiolog√≠a II": {
      subcursos: {
        "Anatom√≠a": [
          {sem:1, tema:"Pared tor√°cica, regi√≥n mamaria y radioanatom√≠a de t√≥rax."},
          {sem:2, tema:"Mediastino superior, anterior y medio (pericardio y morfolog√≠a externa)."},
          {sem:3, tema:"Mediastino medio II (morfolog√≠a interna y conducci√≥n) y radioanatom√≠a cardiaca."},
          {sem:4, tema:"Mediastino posterior y radioanatom√≠a del mediastino posterior. Examen Parcial."},
          {sem:5, tema:"Pulmones (segmentaci√≥n e inervaci√≥n) y radioanatom√≠a pulmonar."},
          {sem:6, tema:"Columna vertebral dorsal y m√∫sculos paravertebrales."},
          {sem:7, tema:"Radioanatom√≠a de columna tor√°cica, anatom√≠a del ri√±√≥n y v√≠as urinarias."},
          {sem:8, tema:"Radioanatom√≠a del ri√±√≥n y v√≠as urinarias. Examen Final."}
        ],
        "Fisiolog√≠a": [
          {sem:1, tema:"Hemodinamia y electrofisiolog√≠a cardiaca."},
          {sem:2, tema:"Electrocardiograma I, contracci√≥n y ciclo cardiaco."},
          {sem:3, tema:"Presi√≥n arterial, gasto cardiaco, retorno venoso y circulaciones especiales."},
          {sem:4, tema:"Mec√°nica respiratoria, vol√∫menes y capacidades. Examen Parcial."},
          {sem:5, tema:"Intercambio de gases, transporte de O‚ÇÇ/CO‚ÇÇ, control respiratorio y circulaci√≥n pulmonar."},
          {sem:6, tema:"Estructura renal, aclaramiento, filtraci√≥n glomerular, reabsorci√≥n y secreci√≥n renal."},
          {sem:7, tema:"Regulaci√≥n de electrolitos, volumen, equilibrio √°cido-base y diur√©ticos."},
          {sem:8, tema:"Fisiolog√≠a de la aviaci√≥n, grandes alturas y buceo profundo. Examen Final."}
        ],
        "Histolog√≠a": [
          {sem:1, tema:"Embriolog√≠a cardiovascular e histolog√≠a del coraz√≥n y v√°lvulas."},
          {sem:2, tema:"Histolog√≠a vascular (arterias, capilares, venas y linf√°ticos)."},
          {sem:3, tema:"Integraci√≥n de embriolog√≠a e histolog√≠a card√≠aca."},
          {sem:4, tema:"Integraci√≥n de histolog√≠a vascular. Examen Parcial."},
          {sem:5, tema:"Embriolog√≠a e histolog√≠a del aparato respiratorio (I y II)."},
          {sem:6, tema:"Embriolog√≠a urinaria e histolog√≠a del ri√±√≥n y la pelvis renal."},
          {sem:7, tema:"Histolog√≠a de ur√©ter, vejiga y uretra; malformaciones cong√©nitas renales."},
          {sem:8, tema:"Histopatolog√≠a renal y de las v√≠as urinarias. Examen Final."}
        ]
      }
    },

    "Anatom√≠a General": {
      semanas: [
        {sem:1, tema:"Hombro, Axila, Brazo y Codo."},
        {sem:2, tema:"Antebrazo, Mu√±eca y Mano."},
        {sem:3, tema:"Regi√≥n Gl√∫tea, Cadera, Muslo y Rodilla."},
        {sem:4, tema:"Pierna, Regi√≥n Popl√≠tea, Tobillo y Pie."},
        {sem:5, tema:"V√©rtebras cervicales, regiones y tri√°ngulos del cuello."},
        {sem:6, tema:"V√≠sceras del cuello, Cabeza √≥sea (Neuro/Viscerocr√°neo)."},
        {sem:7, tema:"M√∫sculos m√≠mica/masticaci√≥n y Regiones profundas de la cara."},
        {sem:8, tema:"Cavidad oral, fosas nasales y paredes de tronco."}
      ]
    },

    "Biolog√≠a Celular y Molecular": {
      subcursos: {
        "Teor√≠a": [
          {sem:1, tema:"Niveles de organizaci√≥n, Bioelementos, Enlaces qu√≠micos y Agua. Gl√∫cidos y L√≠pidos."},
          {sem:2, tema:"Amino√°cidos, Prote√≠nas y Enzimas. Dogma Central: Estructura del ADN y ARN."},
          {sem:3, tema:"La C√©lula: Evoluci√≥n (Proca vs. Euca) y Membrana Celular. Transporte de membrana (Pasivo/Activo)."},
          {sem:4, tema:"Citoesqueleto, Matriz Extracelular y Uniones celulares. Evaluaci√≥n Parcial."},
          {sem:5, tema:"Sistema de Endomembranas (RER, REL, Golgi) y Digesti√≥n Celular (Lisosomas/Peroxisomas). Mitocondrias y Bioenerg√©tica."},
          {sem:6, tema:"N√∫cleo Celular, Cromatina y Replicaci√≥n del ADN. Transcripci√≥n y Procesamiento de ARN."},
          {sem:7, tema:"Traducci√≥n (S√≠ntesis de Prote√≠nas). Ciclo Celular, Mitosis, Meiosis y Apoptosis."},
          {sem:8, tema:"Se√±alizaci√≥n celular, Introducci√≥n al C√°ncer y Gen√©tica Molecular. Evaluaci√≥n Final."}
        ],
        "Laboratorio": [
          {sem:1, tema:"Normas de Bioseguridad y Manejo del Microscopio. Identificaci√≥n de Gl√∫cidos y L√≠pidos."},
          {sem:2, tema:"Identificaci√≥n de Prote√≠nas y Enzimas. Extracci√≥n de ADN."},
          {sem:3, tema:"C√©lula Procariota y Eucariota. Permeabilidad de la Membrana Celular (Di√°lisis)."},
          {sem:4, tema:"Diversidad Celular y Diferenciaci√≥n. Evaluaci√≥n Parcial."},
          {sem:5, tema:"Fraccionamiento Celular. Respiraci√≥n Celular (Fermentaci√≥n)."},
          {sem:6, tema:"Observaci√≥n de N√∫cleo y Corp√∫sculo de Barr. Soluciones y Diluciones."},
          {sem:7, tema:"S√≠ntesis de Prote√≠nas (Simulaci√≥n). Mitosis y Meiosis (C√©lulas vegetales/animales)."},
          {sem:8, tema:"Tecnolog√≠a del ADN Recombinante (Simulaci√≥n). Evaluaci√≥n Final."}
        ]
      }
    },

    "Bioqu√≠mica": {
      subcursos: {
        "Teor√≠a": [
          {sem:1, tema:"Bioelementos y Biomol√©culas: Agua, pH, soluciones buffer, bioelementos y vitaminas. Estructuras supramoleculares."},
          {sem:2, tema:"Amino√°cidos y Prote√≠nas: Estructura, clasificaci√≥n y propiedades. Plegamiento y desnaturalizaci√≥n."},
          {sem:3, tema:"Enzimas y Cin√©tica: Energ√≠a de activaci√≥n y factores que afectan la actividad enzim√°tica. Evaluaci√≥n Continua 1."},
          {sem:4, tema:"Metabolismo de Carbohidratos: Glic√≥lisis, ciclo de la urea y degradaci√≥n de amino√°cidos. Evaluaci√≥n Parcial."},
          {sem:5, tema:"Gluc√≥geno y Bioenerg√©tica: S√≠ntesis/degradaci√≥n de gluc√≥geno, ciclo de Krebs y fosforilaci√≥n oxidativa."},
          {sem:6, tema:"Metabolismo de L√≠pidos: Lipog√©nesis, beta-oxidaci√≥n y s√≠ntesis de triglic√©ridos. Evaluaci√≥n Continua 2."},
          {sem:7, tema:"Colesterol y √Åcidos Nucleicos: S√≠ntesis de colesterol, estructura de ADN/ARN y replicaci√≥n."},
          {sem:8, tema:"S√≠ntesis de Prote√≠nas: Transcripci√≥n y traducci√≥n. Presentaci√≥n de situaci√≥n cl√≠nica. Evaluaci√≥n Final."}
        ],
        "Laboratorio": [
          {sem:1, tema:"Espectrofotometr√≠a: Principios de bioseguridad y determinaci√≥n de concentraci√≥n de compuestos."},
          {sem:2, tema:"Prote√≠nas totales: Determinaci√≥n de prote√≠nas totales, alb√∫mina y globulinas en suero."},
          {sem:3, tema:"Degradaci√≥n de prote√≠nas y factores que afectan la actividad enzim√°tica."},
          {sem:4, tema:"Concentraci√≥n de urea: Determinaci√≥n en suero e identificaci√≥n de biomol√©culas. Evaluaci√≥n Parcial."},
          {sem:5, tema:"Metabolismo en ayuno/postprandial: Evaluaci√≥n de rutas metab√≥licas en condiciones de alimentaci√≥n."},
          {sem:6, tema:"Digesti√≥n y Hidr√≥lisis: Digesti√≥n enzim√°tica del almid√≥n e hidr√≥lisis de l√≠pidos."},
          {sem:7, tema:"Perfil Lip√≠dico: Determinaci√≥n de triglic√©ridos, colesterol y lipoprote√≠nas en suero."},
          {sem:8, tema:"√Åcido √örico y ADN: Extracci√≥n de ADN y determinaci√≥n de √°cido √∫rico en suero. Evaluaci√≥n Final."}
        ]
      }
    };

</script>
<!-- CONTENEDOR PRINCIPAL PARA CURSOS -->
<div id="cursos-container" class="container hidden">
  <h2>Cursos Disponibles</h2>
  <div id="cursos-list" style="display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px;"></div>
</div>

<!-- CONTENEDOR DE SUBCURSOS -->
<div id="subcurso-container" class="container hidden">
  <h2 id="subcurso-title"></h2>
  <div id="subcurso-list" style="display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px;"></div>
  <button onclick="volverACursos()" style="margin-top:20px; padding:10px 20px; background:#2563eb; color:white; border:none; border-radius:10px; cursor:pointer;">Volver a Cursos</button>
</div>

<!-- CONTENEDOR DE SEMANAS -->
<div id="semana-container" class="container hidden">
  <h2 id="semana-title"></h2>
  <div id="semana-list" style="display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px;"></div>
  <button onclick="volverASubcurso()" style="margin-top:20px; padding:10px 20px; background:#2563eb; color:white; border:none; border-radius:10px; cursor:pointer;">Volver a Subcursos</button>
</div>

<!-- CONTENEDOR DE CONTENIDO -->
<div id="contenido-semana-container" class="container hidden">
  <h2 id="contenido-title"></h2>
  <div style="margin-top:20px;">
    <button onclick="alert('Ver grabaci√≥n')" style="margin-right:10px; padding:10px 15px; background:#10b981; color:white; border:none; border-radius:8px; cursor:pointer;">üìπ Grabaci√≥n</button>
    <button onclick="alert('Abrir PDF')" style="margin-right:10px; padding:10px 15px; background:#3b82f6; color:white; border:none; border-radius:8px; cursor:pointer;">üìÑ PDF</button>
    <button onclick="alert('Apliquemos lo aprendido')" style="padding:10px 15px; background:#f59e0b; color:white; border:none; border-radius:8px; cursor:pointer;">üìù Apliquemos lo aprendido</button>
  </div>
  <button onclick="volverASemanas()" style="margin-top:20px; padding:10px 20px; background:#2563eb; color:white; border:none; border-radius:10px; cursor:pointer;">Volver a Semanas</button>
</div>

<script>
  let cursoActual = '';
  let subcursoActual = '';

  // FUNCION PARA MOSTRAR CURSOS PRINCIPALES
  function mostrarCursos() {
    document.getElementById('cursos-container').classList.remove('hidden');
    const cursosList = document.getElementById('cursos-list');
    cursosList.innerHTML = '';
    for (const curso in cursos) {
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `
        <h3>${curso}</h3>
        <button onclick="abrirCurso('${curso}')">Entrar al curso</button>
      `;
      cursosList.appendChild(card);
    }
  }

  // FUNCION PARA ABRIR CURSO
  function abrirCurso(curso) {
    cursoActual = curso;
    document.getElementById('cursos-container').classList.add('hidden');
    // Verificar si tiene subcursos
    if (cursos[curso].subcursos) {
      mostrarSubcursos(curso);
    } else {
      mostrarSemanas(curso);
    }
  }

  // FUNCION PARA MOSTRAR SUBCURSOS
  function mostrarSubcursos(curso) {
    document.getElementById('subcurso-container').classList.remove('hidden');
    document.getElementById('subcurso-title').innerText = `Subcursos de ${curso}`;
    const subcursoList = document.getElementById('subcurso-list');
    subcursoList.innerHTML = '';
    const subcursos = Object.keys(cursos[curso].subcursos);
    subcursos.forEach(sc => {
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `
        <h3>${sc}</h3>
        <button onclick="abrirSubcurso('${sc}')">Ver semanas</button>
      `;
      subcursoList.appendChild(card);
    });
  }

  // FUNCION PARA ABRIR SUBCURSO
  function abrirSubcurso(subcurso) {
    subcursoActual = subcurso;
    document.getElementById('subcurso-container').classList.add('hidden');
    mostrarSemanas(cursoActual, subcurso);
  }

  // FUNCION PARA MOSTRAR SEMANAS
  function mostrarSemanas(curso, subcurso=null) {
    document.getElementById('semana-container').classList.remove('hidden');
    let semanas;
    if (subcurso) {
      semanas = cursos[curso].subcursos[subcurso];
      document.getElementById('semana-title').innerText = `${curso} - ${subcurso} (Semanas)`;
    } else {
      semanas = cursos[curso].semanas;
      document.getElementById('semana-title').innerText = `${curso} (Semanas)`;
    }

    const semanaList = document.getElementById('semana-list');
    semanaList.innerHTML = '';
    semanas.forEach(s => {
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `
        <h3>Semana ${s.sem}</h3>
        <p>${s.fisiologia || s.histologia || s.tema}</p>
        <button onclick="abrirContenido(${s.sem})">Ver contenido</button>
      `;
      semanaList.appendChild(card);
    });
  }

  // FUNCION PARA ABRIR CONTENIDO
  function abrirContenido(sem) {
    document.getElementById('semana-container').classList.add('hidden');
    document.getElementById('contenido-semana-container').classList.remove('hidden');

    let contenidoText = '';
    const curso = cursoActual;
    const subcurso = subcursoActual;

    if (subcurso) {
      const semanaObj = cursos[curso].subcursos[subcurso].find(s => s.sem === sem);
      contenidoText = `Semana ${sem}: ${semanaObj.tema}`;
    } else {
      const semanaObj = cursos[curso].semanas.find(s => s.sem === sem);
      contenidoText = `Semana ${sem}: ${semanaObj.fisiologia || semanaObj.histologia || semanaObj.tema}`;
    }

    document.getElementById('contenido-title').innerText = contenidoText;
  }

  // FUNCIONES DE VOLVER
  function volverACursos() {
    document.getElementById('subcurso-container').classList.add('hidden');
    mostrarCursos();
  }
  function volverASubcurso() {
    document.getElementById('semana-container').classList.add('hidden');
    mostrarSubcursos(cursoActual);
  }
  function volverASemanas() {
    document.getElementById('contenido-semana-container').classList.add('hidden');
    mostrarSemanas(cursoActual, subcursoActual);
  }

  // INICIAMOS MOSTRANDO CURSOS
  mostrarCursos();
</script>
<!-- FIREBASE SDK -->
<script type="module">
  // Importar Firebase
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-app.js";
  import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-auth.js";
  import { getFirestore, collection, getDocs, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-firestore.js";

  // CONFIGURACI√ìN DE FIREBASE
  const firebaseConfig = {
    apiKey: "AIzaSyDAmEVU8J-uk2Yg6bL5n28xbP1771cHGME",
    authDomain: "neurovap53-cdbcf.firebaseapp.com",
    projectId: "neurovap53-cdbcf",
    storageBucket: "neurovap53-cdbcf.firebasestorage.app",
    messagingSenderId: "558340314022",
    appId: "1:558340314022:web:2027622d3b86af54ddb567",
    measurementId: "G-70R7JRGVKG"
  };

  // Inicializamos Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth();
  const db = getFirestore();

  const provider = new GoogleAuthProvider();

  // ELEMENTOS DEL DOM
  const loginBtn = document.getElementById('login-google-btn');
  const logoutBtn = document.getElementById('logout-btn');
  const userDisplay = document.getElementById('user-display');

  // LOGIN CON GOOGLE
  loginBtn.addEventListener('click', async () => {
    try {
      const result = await signInWithPopup(auth, provider);
      const user = result.user;
      // Guardar usuario en Firestore si no existe
      const userDocRef = doc(db, 'usuarios', user.uid);
      await setDoc(userDocRef, {
        nombre: user.displayName,
        email: user.email,
        rol: 'alumno', // puedes cambiarlo manualmente a "admin" si quieres
        horario: cursosAsignados[user.uid] || []
      }, { merge: true });
    } catch (err) {
      console.error(err);
      alert('Error al iniciar sesi√≥n con Google');
    }
  });

  // CERRAR SESI√ìN
  logoutBtn.addEventListener('click', async () => {
    await signOut(auth);
  });

  // DETECTAR CAMBIO DE SESI√ìN
  onAuthStateChanged(auth, async (user) => {
    if (user) {
      loginBtn.classList.add('hidden');
      logoutBtn.classList.remove('hidden');
      userDisplay.innerText = `Hola, ${user.displayName}`;
      // Mostrar cursos
      mostrarCursos();
      // Cargar rol desde Firestore
      const userDoc = await getDocs(collection(db, 'usuarios'));
      userDoc.forEach(doc => {
        if (doc.id === user.uid) {
          if(doc.data().rol === 'admin') {
            mostrarHorariosAdmin();
          } else {
            mostrarHorarioAlumno(doc.data().horario);
          }
        }
      });
    } else {
      loginBtn.classList.remove('hidden');
      logoutBtn.classList.add('hidden');
      userDisplay.innerText = '';
    }
  });

  // HORARIOS DE EJEMPLO PARA ALUMNOS
  const cursosAsignados = {
    // uid: [horario]
  };

  // FUNCI√ìN PARA MOSTRAR HORARIO DEL ALUMNO
  function mostrarHorarioAlumno(horario) {
    const container = document.getElementById('horario-container');
    container.innerHTML = '<h2>Horario Semanal</h2>';
    if (!horario || horario.length === 0) {
      container.innerHTML += '<p>No tienes cursos asignados.</p>';
      return;
    }
    const table = document.createElement('table');
    table.style.width = '100%';
    table.style.borderCollapse = 'collapse';
    table.innerHTML = `
      <tr style="background:#3b82f6; color:white;">
        <th>Dia</th>
        <th>Curso</th>
        <th>Hora</th>
      </tr>
    `;
    horario.forEach(h => {
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${h.dia}</td><td>${h.curso}</td><td>${h.hora}</td>`;
      tr.style.borderBottom = '1px solid #ddd';
      table.appendChild(tr);
    });
    container.appendChild(table);
  }

  // FUNCI√ìN PARA MOSTRAR HORARIOS DE TODOS LOS ALUMNOS (ADMIN)
  async function mostrarHorariosAdmin() {
    const container = document.getElementById('horario-container');
    container.innerHTML = '<h2>Horarios de todos los alumnos</h2>';
    const usuariosSnapshot = await getDocs(collection(db, 'usuarios'));
    usuariosSnapshot.forEach(doc => {
      const data = doc.data();
      container.innerHTML += `<h3>${data.nombre} (${data.email})</h3>`;
      if(data.horario && data.horario.length > 0) {
        const table = document.createElement('table');
        table.style.width = '100%';
        table.style.borderCollapse = 'collapse';
        table.innerHTML = `
          <tr style="background:#2563eb; color:white;">
            <th>Dia</th><th>Curso</th><th>Hora</th>
          </tr>
        `;
        data.horario.forEach(h => {
          const tr = document.createElement('tr');
          tr.innerHTML = `<td>${h.dia}</td><td>${h.curso}</td><td>${h.hora}</td>`;
          tr.style.borderBottom = '1px solid #ddd';
          table.appendChild(tr);
        });
        container.appendChild(table);
      } else {
        container.innerHTML += '<p>No hay cursos asignados</p>';
      }
    });
  }

</script>

<!-- BOTONES LOGIN / LOGOUT -->
<div style="text-align:center; margin-top:20px;">
  <button id="login-google-btn" style="padding:12px 20px; background:#4285F4; color:white; border:none; border-radius:8px; cursor:pointer;">Login con Google</button>
  <button id="logout-btn" class="hidden" style="padding:12px 20px; background:#ef4444; color:white; border:none; border-radius:8px; cursor:pointer;">Cerrar sesi√≥n</button>
  <div id="user-display" style="margin-top:10px; font-weight:bold;"></div>
</div>

<!-- CONTENEDOR HORARIO -->
<div id="horario-container" class="container" style="margin-top:40px;"></div>
<!-- ================== SCRIPTS FINALES ================== -->
<script>
  // Funci√≥n para mostrar secciones principales
  function showSection(id) {
    const sections = ['inicio', 'cursos', 'material', 'horario-container'];
    sections.forEach(s => {
      const el = document.getElementById(s);
      if(el) el.classList.add('hidden');
    });
    document.getElementById(id).classList.remove('hidden');
  }

  // Funci√≥n para mostrar contenido de un curso (subcursos y semanas)
  function openCurso(cursoId) {
    const contenidoCurso = document.getElementById('contenido-curso');
    contenidoCurso.innerHTML = ''; // Limpiar contenido previo
    contenidoCurso.classList.remove('hidden');

    // Ejemplo de estructura para Morfo 2: subcursos Anatom√≠a, Fisiolog√≠a, Histolog√≠a
    if(cursoId === 'morfo2') {
      const subcursos = ['Anatom√≠a', 'Fisiolog√≠a', 'Histolog√≠a'];
      subcursos.forEach(sub => {
        const div = document.createElement('div');
        div.style.marginBottom = '30px';
        div.innerHTML = `<h3 style="color:#2563eb;">${sub}</h3>`;
        
        // Crear semanas 1-8
        const ul = document.createElement('ul');
        for(let i=1;i<=8;i++){
          const li = document.createElement('li');
          li.innerHTML = `<strong>Semana ${i}:</strong> Tema de ${sub} - <button onclick="alert('Ver grabaci√≥n')">Grabaci√≥n</button> <button onclick="alert('Descargar PDF')">PDF</button> <button onclick="alert('Apliquemos lo aprendido')">Apliquemos lo aprendido</button>`;
          ul.appendChild(li);
        }
        div.appendChild(ul);
        contenidoCurso.appendChild(div);
      });
    }

    // Ejemplo para un curso individual, como Anatom√≠a General
    if(cursoId === 'anatomia') {
      const div = document.createElement('div');
      div.innerHTML = `<h3 style="color:#2563eb;">Anatom√≠a General</h3>`;
      const ul = document.createElement('ul');
      for(let i=1;i<=8;i++){
        const li = document.createElement('li');
        li.innerHTML = `<strong>Semana ${i}:</strong> Tema de Anatom√≠a - <button onclick="alert('Ver grabaci√≥n')">Grabaci√≥n</button> <button onclick="alert('Descargar PDF')">PDF</button> <button onclick="alert('Apliquemos lo aprendido')">Apliquemos lo aprendido</button>`;
        ul.appendChild(li);
      }
      div.appendChild(ul);
      contenidoCurso.appendChild(div);
    }
  }

  // Inicializamos paneles ocultos
  document.addEventListener('DOMContentLoaded', () => {
    document.getElementById('contenido-curso').classList.add('hidden');
  });
</script>

<!-- CONTENEDOR PARA EL CURSO SELECCIONADO -->
<div id="contenido-curso" class="container card hidden" style="margin-top:40px;"></div>

</body>
</html>
