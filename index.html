<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Neurova P53</title>

<style>
body {
  margin:0;
  font-family:'Segoe UI', Arial, sans-serif;
  background:#f8fbff;
  color:#1f2937;
}
header {
  background: linear-gradient(90deg, #e0f2fe, #bae6fd, #93c5fd);
  padding: 20px 40px;
  display:flex;
  align-items:center;
  justify-content:space-between;
}
header h1 { margin:0; color:#0f172a; font-size:28px; letter-spacing:1px;}
nav a { margin-left:20px; text-decoration:none; color:#0f172a; font-weight:500; cursor:pointer;}
.container { max-width:1100px; margin:40px auto; padding:0 20px; }
.card {
  background:white;
  border-radius:16px;
  box-shadow:0 10px 30px rgba(0,0,0,0.08);
  padding:30px;
  margin-bottom:20px;
  text-align:center;
}
.card h3 { color:#0077cc; }
button {
  margin-top:15px;
  padding:12px 20px;
  border:none;
  border-radius:12px;
  background:#0077cc;
  color:white;
  cursor:pointer;
}
button:hover { background:#005fa3; }
.hidden { display:none; }
h2 { color:#1e3a8a; margin-bottom:20px; }
</style>
</head>

<body>

<header>
  <img src="logo.jpeg" alt="Neurova P53" style="height:90px;">
  <h1>Neurova P53</h1>
  <nav>
    <a onclick="showSection('inicio')">Inicio</a>
    <a onclick="showSection('cursos-container')">Cursos</a>
    <a onclick="showSection('horario-container')">Horario</a>
    <a id="admin-nav" class="hidden" onclick="showSection('admin-panel')">Admin</a>
  </nav>
</header>

<!-- LOGIN -->
<div class="container card" id="login-container">
  <h2>Iniciar sesi√≥n</h2>
  <button id="login-btn">Login con Google</button>
  <div id="user-display" style="margin-top:10px; font-weight:bold;"></div>
  <button id="logout-btn" class="hidden" style="background:#ef4444;">Cerrar sesi√≥n</button>
</div>

<!-- INICIO -->
<div id="inicio" class="container">
  <h2>Bienvenido a Neurova P53</h2>
  <p>Academia premium especializada en ciencias de la salud. Formaci√≥n rigurosa, clara y progresiva, dise√±ada por ciclos acad√©micos.</p>
</div>

<!-- CURSOS -->
<div id="cursos-container" class="container hidden">
  <h2>Cursos Disponibles</h2>
  <div id="cursos-list" style="display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px;"></div>
</div>

<!-- ADMIN PANEL -->
<div id="admin-panel" class="container card hidden">
  <h2>Panel Admin</h2>
  <p>Aqu√≠ puedes agregar cursos, subir PDFs, grabaciones y formularios para los alumnos.</p>
  <button onclick="alert('Agregar curso')">Agregar Curso</button>
  <button onclick="alert('Agregar Contenido')">Agregar PDF/Grabaci√≥n</button>
  <button onclick="alert('Ver avance de alumnos')">Ver Avance</button>
</div>

<!-- HORARIO -->
<div id="horario-container" class="container hidden"></div>

<!-- SUBCURSOS Y SEMANAS -->
<div id="subcurso-container" class="container hidden">
  <h2 id="subcurso-title"></h2>
  <div id="subcurso-list" style="display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px;"></div>
  <button onclick="volverACursos()" style="margin-top:20px; padding:10px 20px; background:#2563eb; color:white; border:none; border-radius:10px; cursor:pointer;">Volver a Cursos</button>
</div>

<div id="semana-container" class="container hidden">
  <h2 id="semana-title"></h2>
  <div id="semana-list" style="display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px;"></div>
  <button onclick="volverASubcurso()" style="margin-top:20px; padding:10px 20px; background:#2563eb; color:white; border:none; border-radius:10px; cursor:pointer;">Volver a Subcursos</button>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-app.js";
import { getAuth, GoogleAuthProvider, signInWithPopup, signOut } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-auth.js";

const firebaseConfig = {
  apiKey:"AIzaSyDAmEVU8J-uk2Yg6bL5n28xbP1771cHGME",
  authDomain:"neurovap53-cdbcf.firebaseapp.com",
  projectId:"neurovap53-cdbcf"
};
const app = initializeApp(firebaseConfig);
const auth = getAuth();
const provider = new GoogleAuthProvider();

const loginBtn = document.getElementById('login-btn');
const logoutBtn = document.getElementById('logout-btn');
const userDisplay = document.getElementById('user-display');
const adminNav = document.getElementById('admin-nav');

loginBtn.addEventListener('click', async ()=>{
  try{
    const result = await signInWithPopup(auth, provider);
    const user = result.user;
    loginBtn.classList.add('hidden');
    logoutBtn.classList.remove('hidden');
    userDisplay.innerText=`Hola, ${user.displayName}`;
    document.getElementById('login-container').classList.add('hidden');

    if(user.email === "jamesucribanco333@gmail.com"){
      adminNav.classList.remove('hidden');
      document.getElementById('admin-panel').classList.remove('hidden');
    }

    mostrarCursos();
  }catch(err){alert("Error: "+err.message);}
});

logoutBtn.addEventListener('click', async ()=>{
  await signOut(auth);
  loginBtn.classList.remove('hidden');
  logoutBtn.classList.add('hidden');
  adminNav.classList.add('hidden');
  userDisplay.innerText='';
  document.getElementById('cursos-container').classList.add('hidden');
  document.getElementById('admin-panel').classList.add('hidden');
});

function showSection(id){
  const sections = ['inicio','cursos-container','horario-container','admin-panel','subcurso-container','semana-container'];
  sections.forEach(s=>document.getElementById(s).classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
}

let cursoActual='';

const cursos = {
  "Morfofisiolog√≠a 1": ["Semana 1","Semana 2","Semana 3","Semana 4","Semana 5","Semana 6","Semana 7","Semana 8"],
  "Morfofisiolog√≠a 2": ["Semana 1","Semana 2","Semana 3","Semana 4","Semana 5","Semana 6","Semana 7","Semana 8"],
  "Anatom√≠a General": ["Semana 1","Semana 2","Semana 3","Semana 4","Semana 5","Semana 6","Semana 7","Semana 8"],
  "Biolog√≠a Celular y Molecular": ["Semana 1","Semana 2","Semana 3","Semana 4","Semana 5","Semana 6","Semana 7","Semana 8"],
  "Bioqu√≠mica": ["Semana 1","Semana 2","Semana 3","Semana 4","Semana 5","Semana 6","Semana 7","Semana 8"]
};

function mostrarCursos(){
  const cursosList = document.getElementById('cursos-list');
  cursosList.innerHTML='';
  for(const c in cursos){
    const card = document.createElement('div');
    card.className='card';
    card.innerHTML=`<h3>${c}</h3><button onclick="abrirCurso('${c}')">Entrar</button>`;
    cursosList.appendChild(card);
  }
  showSection('cursos-container');
}

function abrirCurso(curso){
  cursoActual=curso;
  const subContainer=document.getElementById('subcurso-container');
  const title=document.getElementById('subcurso-title');
  const list=document.getElementById('subcurso-list');
  list.innerHTML='';
  title.innerText=`${curso} - Semanas`;
  cursos[curso].forEach((s,idx)=>{
    const card=document.createElement('div');
    card.className='card';
    card.innerHTML=`<h3>${s}</h3><button onclick="abrirSemana(${idx+1})">Ver contenido</button>`;
    list.appendChild(card);
  });
  showSection('subcurso-container');
}

function abrirSemana(semana){
  const semanaContainer=document.getElementById('semana-container');
  const title=document.getElementById('semana-title');
  title.innerText=`${cursoActual} - Semana ${semana}`;
  showSection('semana-container');
}

function volverACursos(){ mostrarCursos(); }
function volverASubcurso(){ showSection('subcurso-container'); }

</script>
</body>
</html>


  <!-- HEADER -->
  <header>
    <img src="logo.jpeg" alt="Neurova P53" style="height:90px;">
    <h1>Neurova P53</h1>
    <nav>
      <a onclick="showSection('inicio')">Inicio</a>
      <a onclick="showSection('cursos')">Cursos</a>
      <a onclick="showSection('horario-container')">Horario</a>
      <a onclick="showSection('material')">Material</a>
    </nav>
  </header>

  <div class="container">
    <!-- LOGIN -->
    <div id="login-container" class="card">
      <h2>Iniciar Sesi√≥n</h2>
      <button id="login-google-btn">Login con Google</button>
      <div id="user-display" style="margin-top:10px; font-weight:bold;"></div>
    </div>

    <!-- BOT√ìN CERRAR SESI√ìN -->
    <div style="text-align:center; margin-top:20px;">
      <button id="logout-btn" class="hidden" style="background:#ef4444;">Cerrar sesi√≥n</button>
    </div>

    <!-- CURSOS -->
    <div id="cursos-container" class="container hidden">
      <h2>Cursos Disponibles</h2>
      <div id="cursos-list" style="display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px;"></div>
    </div>

    <!-- SUBCURSOS -->
    <div id="subcurso-container" class="container hidden">
      <h2 id="subcurso-title"></h2>
      <div id="subcurso-list" style="display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px;"></div>
      <button onclick="volverACursos()">Volver a Cursos</button>
    </div>

    <!-- SEMANAS -->
    <div id="semana-container" class="container hidden">
      <h2 id="semana-title"></h2>
      <div id="semana-list" style="display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px;"></div>
      <button onclick="volverASubcurso()">Volver a Subcursos</button>
    </div>

    <!-- CONTENIDO DE SEMANA -->
    <div id="contenido-semana-container" class="container hidden">
      <h2 id="contenido-title"></h2>
      <div style="margin-top:20px;">
        <button id="ver-grabacion-btn">üìπ Grabaci√≥n</button>
        <button id="abrir-pdf-btn">üìÑ PDF</button>
        <button id="apliquemos-btn">üìù Apliquemos lo aprendido</button>
      </div>
      <button onclick="volverASemanas()">Volver a Semanas</button>
    </div>

    <!-- HORARIO -->
    <div id="horario-container" class="container hidden"></div>

    <!-- FORMULARIO ADMIN PARA AGREGAR CURSOS -->
    <div id="admin-panel" class="container card hidden">
      <h2>Panel de Administraci√≥n</h2>
      <input type="text" id="nuevo-curso-nombre" placeholder="Nombre del curso">
      <button id="agregar-curso-btn">Agregar Curso</button>
      <div id="lista-cursos-admin" style="margin-top:20px;"></div>
    </div>

  </div>
<script type="module">
  // ------------------- FIREBASE -------------------
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-app.js";
  import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-auth.js";
  import { getFirestore, collection, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDAmEVU8J-uk2Yg6bL5n28xbP1771cHGME",
    authDomain: "neurovap53-cdbcf.firebaseapp.com",
    projectId: "neurovap53-cdbcf",
    storageBucket: "neurovap53-cdbcf.firebasestorage.app",
    messagingSenderId: "558340314022",
    appId: "1:558340314022:web:2027622d3b86af54ddb567"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);
  const provider = new GoogleAuthProvider();

  // ------------------- CURSOS -------------------
  const cursos = {
    "Morfofisiolog√≠a 1": {
      semanas: [
        {sem:1, fisiologia:"Membrana celular, receptores, canales, transporte y potenciales de membrana/acci√≥n. Regularizaci√≥n y se√±alizaci√≥n celular.", histologia:"Procesamiento histol√≥gico, membrana celular, organelas y n√∫cleo. Desarrollo embrionario del esqueleto y tejido cartilaginoso."},
        {sem:2, fisiologia:"Transmisi√≥n de se√±ales celulares. Composici√≥n y regulaci√≥n del medio interno, √≥smosis y l√≠quidos corporales.", histologia:"Tejido √≥seo y osificaci√≥n. Origen embrionario del sistema muscular y Tejido muscular I."},
        {sem:3, fisiologia:"Neurotransmisores, receptores y sinapsis. Contracci√≥n y excitaci√≥n muscular.", histologia:"Tejido muscular II. Neurohistog√©nesis y tejido nervioso."},
        {sem:4, fisiologia:"Metabolismo √≥seo. Evaluaci√≥n Parcial.", histologia:"Introducci√≥n al sistema vascular. Evaluaci√≥n Parcial."},
        {sem:5, fisiologia:"Sangre y sus propiedades, hematopoyesis, eritropoyesis y hemograma. Fisiolog√≠a eritrocitaria I (membrana, metabolismo y hemoglobina).", histologia:"Tejido epitelial de revestimiento. Tejido epitelial glandular."},
        {sem:6, fisiologia:"Fisiolog√≠a eritrocitaria II (hierro, Vit B12 y B9). Fisiolog√≠a plaquetaria, hemostasia y fibrin√≥lisis.", histologia:"Matriz extracelular, tejido conectivo y tejido adiposo. Tejido sangu√≠neo y hematopoyesis."},
        {sem:7, fisiologia:"Generalidades del sistema inmunol√≥gico, respuesta innata y fagocitosis. Inmunidad adquirida, linfocitos T y B, y grupos sangu√≠neos.", histologia:"Tejido linfoide y MALT. √ìrganos linfoides."},
        {sem:8, fisiologia:"Respuesta inflamatoria, tolerancia e hipersensibilidad. Evaluaci√≥n Final.", histologia:"Sistema tegumentario y sus anexos. Evaluaci√≥n Final."}
      ]
    },
    "Morfofisiolog√≠a 2": {
      subcursos:{
        "Anatom√≠a": [
          {sem:1, tema:"Pared tor√°cica, regi√≥n mamaria y radioanatom√≠a de t√≥rax."},
          {sem:2, tema:"Mediastino superior, anterior y medio (pericardio y morfolog√≠a externa)."},
          {sem:3, tema:"Mediastino medio II (morfolog√≠a interna y conducci√≥n) y radioanatom√≠a cardiaca."},
          {sem:4, tema:"Mediastino posterior y radioanatom√≠a del mediastino posterior. Examen Parcial."},
          {sem:5, tema:"Pulmones (segmentaci√≥n e inervaci√≥n) y radioanatom√≠a pulmonar."},
          {sem:6, tema:"Columna vertebral dorsal y m√∫sculos paravertebrales."},
          {sem:7, tema:"Radioanatom√≠a de columna tor√°cica, anatom√≠a del ri√±√≥n y v√≠as urinarias."},
          {sem:8, tema:"Radioanatom√≠a del ri√±√≥n y v√≠as urinarias. Examen Final."}
        ],
        "Fisiolog√≠a": [
          {sem:1, tema:"Hemodinamia y electrofisiolog√≠a cardiaca."},
          {sem:2, tema:"Electrocardiograma I, contracci√≥n y ciclo cardiaco."},
          {sem:3, tema:"Presi√≥n arterial, gasto cardiaco, retorno venoso y circulaciones especiales."},
          {sem:4, tema:"Mec√°nica respiratoria, vol√∫menes y capacidades. Examen Parcial."},
          {sem:5, tema:"Intercambio de gases, transporte de O‚ÇÇ/CO‚ÇÇ, control respiratorio y circulaci√≥n pulmonar."},
          {sem:6, tema:"Estructura renal, aclaramiento, filtraci√≥n glomerular, reabsorci√≥n y secreci√≥n renal."},
          {sem:7, tema:"Regulaci√≥n de electrolitos, volumen, equilibrio √°cido-base y diur√©ticos."},
          {sem:8, tema:"Fisiolog√≠a de la aviaci√≥n, grandes alturas y buceo profundo. Examen Final."}
        ],
        "Histolog√≠a": [
          {sem:1, tema:"Embriolog√≠a cardiovascular e histolog√≠a del coraz√≥n y v√°lvulas."},
          {sem:2, tema:"Histolog√≠a vascular (arterias, capilares, venas y linf√°ticos)."},
          {sem:3, tema:"Integraci√≥n de embriolog√≠a e histolog√≠a card√≠aca."},
          {sem:4, tema:"Integraci√≥n de histolog√≠a vascular. Examen Parcial."},
          {sem:5, tema:"Embriolog√≠a e histolog√≠a del aparato respiratorio (I y II)."},
          {sem:6, tema:"Embriolog√≠a urinaria e histolog√≠a del ri√±√≥n y la pelvis renal."},
          {sem:7, tema:"Histolog√≠a de ur√©ter, vejiga y uretra; malformaciones cong√©nitas renales."},
          {sem:8, tema:"Histopatolog√≠a renal y de las v√≠as urinarias. Examen Final."}
        ]
      }
    },
    "Anatom√≠a General": {
      semanas:[ 
        {sem:1, tema:"Hombro, Axila, Brazo y Codo."},
        {sem:2, tema:"Antebrazo, Mu√±eca y Mano."},
        {sem:3, tema:"Regi√≥n Gl√∫tea, Cadera, Muslo y Rodilla."},
        {sem:4, tema:"Pierna, Regi√≥n Popl√≠tea, Tobillo y Pie."},
        {sem:5, tema:"V√©rtebras cervicales, regiones y tri√°ngulos del cuello."},
        {sem:6, tema:"V√≠sceras del cuello, Cabeza √≥sea (Neuro/Viscerocr√°neo)."},
        {sem:7, tema:"M√∫sculos m√≠mica/masticaci√≥n y Regiones profundas de la cara."},
        {sem:8, tema:"Cavidad oral, fosas nasales y paredes de tronco."}
      ]
    },
    "Biolog√≠a Celular y Molecular": {
      subcursos:{
        "Teor√≠a": [
          {sem:1, tema:"Niveles de organizaci√≥n, Bioelementos, Enlaces qu√≠micos y Agua. Gl√∫cidos y L√≠pidos."},
          {sem:2, tema:"Amino√°cidos, Prote√≠nas y Enzimas. Dogma Central: Estructura del ADN y ARN."},
          {sem:3, tema:"La C√©lula: Evoluci√≥n (Proca vs. Euca) y Membrana Celular. Transporte de membrana (Pasivo/Activo)."},
          {sem:4, tema:"Citoesqueleto, Matriz Extracelular y Uniones celulares. Evaluaci√≥n Parcial."},
          {sem:5, tema:"Sistema de Endomembranas (RER, REL, Golgi) y Digesti√≥n Celular (Lisosomas/Peroxisomas). Mitocondrias y Bioenerg√©tica."},
          {sem:6, tema:"N√∫cleo Celular, Cromatina y Replicaci√≥n del ADN. Transcripci√≥n y Procesamiento de ARN."},
          {sem:7, tema:"Traducci√≥n (S√≠ntesis de Prote√≠nas). Ciclo Celular, Mitosis, Meiosis y Apoptosis."},
          {sem:8, tema:"Se√±alizaci√≥n celular, Introducci√≥n al C√°ncer y Gen√©tica Molecular. Evaluaci√≥n Final."}
        ],
        "Laboratorio": [
          {sem:1, tema:"Normas de Bioseguridad y Manejo del Microscopio. Identificaci√≥n de Gl√∫cidos y L√≠pidos."},
          {sem:2, tema:"Identificaci√≥n de Prote√≠nas y Enzimas. Extracci√≥n de ADN."},
          {sem:3, tema:"C√©lula Procariota y Eucariota. Permeabilidad de la Membrana Celular (Di√°lisis)."},
          {sem:4, tema:"Diversidad Celular y Diferenciaci√≥n. Evaluaci√≥n Parcial."},
          {sem:5, tema:"Fraccionamiento Celular. Respiraci√≥n Celular (Fermentaci√≥n)."},
          {sem:6, tema:"Observaci√≥n de N√∫cleo y Corp√∫sculo de Barr. Soluciones y Diluciones."},
          {sem:7, tema:"S√≠ntesis de Prote√≠nas (Simulaci√≥n). Mitosis y Meiosis (C√©lulas vegetales/animales)."},
          {sem:8, tema:"Tecnolog√≠a del ADN Recombinante (Simulaci√≥n). Evaluaci√≥n Final."}
        ]
      }
    },
    "Bioqu√≠mica": {
      subcursos:{
        "Teor√≠a": [
          {sem:1, tema:"Bioelementos y Biomol√©culas: Agua, pH, soluciones buffer, bioelementos y vitaminas. Estructuras supramoleculares."},
          {sem:2, tema:"Amino√°cidos y Prote√≠nas: Estructura, clasificaci√≥n y propiedades. Plegamiento y desnaturalizaci√≥n."},
          {sem:3, tema:"Enzimas y Cin√©tica: Energ√≠a de activaci√≥n y factores que afectan la actividad enzim√°tica. Evaluaci√≥n Continua 1."},
          {sem:4, tema:"Metabolismo de Carbohidratos: Glic√≥lisis, ciclo de la urea y degradaci√≥n de amino√°cidos. Evaluaci√≥n Parcial."},
          {sem:5, tema:"Gluc√≥geno y Bioenerg√©tica: S√≠ntesis/degradaci√≥n de gluc√≥geno, ciclo de Krebs y fosforilaci√≥n oxidativa."},
          {sem:6, tema:"Metabolismo de L√≠pidos: Lipog√©nesis, beta-oxidaci√≥n y s√≠ntesis de triglic√©ridos. Evaluaci√≥n Continua 2."},
          {sem:7, tema:"Colesterol y √Åcidos Nucleicos: S√≠ntesis de colesterol, estructura de ADN/ARN y replicaci√≥n."},
          {sem:8, tema:"S√≠ntesis de Prote√≠nas: Transcripci√≥n y traducci√≥n. Presentaci√≥n de situaci√≥n cl√≠nica. Evaluaci√≥n Final."}
        ],
        "Laboratorio": [
          {sem:1, tema:"Espectrofotometr√≠a: Principios de bioseguridad y determinaci√≥n de concentraci√≥n de compuestos."},
          {sem:2, tema:"Prote√≠nas totales: Determinaci√≥n de prote√≠nas totales, alb√∫mina y globulinas en suero."},
          {sem:3, tema:"Degradaci√≥n de prote√≠nas y factores que afectan la actividad enzim√°tica."},
          {sem:4, tema:"Concentraci√≥n de urea: Determinaci√≥n en suero e identificaci√≥n de biomol√©culas. Evaluaci√≥n Parcial."},
          {sem:5, tema:"Metabolismo en ayuno/postprandial: Evaluaci√≥n de rutas metab√≥licas en condiciones de alimentaci√≥n."},
          {sem:6, tema:"Digesti√≥n y Hidr√≥lisis: Digesti√≥n enzim√°tica del almid√≥n e hidr√≥lisis de l√≠pidos."},
          {sem:7, tema:"Perfil Lip√≠dico: Determinaci√≥n de triglic√©ridos, colesterol y lipoprote√≠nas en suero."},
          {sem:8, tema:"√Åcido √örico y ADN: Extracci√≥n de ADN y determinaci√≥n de √°cido √∫rico en suero. Evaluaci√≥n Final."}
        ]
      }
    }
  };

  // ------------------- FUNCIONES DE CURSOS -------------------
  let cursoActual = '';
  let subcursoActual = '';

  function mostrarCursos() {
    document.getElementById('cursos-container').classList.remove('hidden');
    document.getElementById('subcurso-container').classList.add('hidden');
    document.getElementById('semana-container').classList.add('hidden');
    document.getElementById('contenido-semana-container').classList.add('hidden');
    document.getElementById('admin-panel').classList.add('hidden');

    const cursosList = document.getElementById('cursos-list');
    cursosList.innerHTML = '';
    for (const curso in cursos) {
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `<h3>${curso}</h3>
                        <button onclick="abrirCurso('${curso}')">Entrar al curso</button>`;
      cursosList.appendChild(card);
    }
  }

  function abrirCurso(curso) {
    cursoActual = curso;
    const tieneSubcursos = cursos[curso].subcursos !== undefined;
    document.getElementById('cursos-container').classList.add('hidden');
    if (tieneSubcursos) {
      mostrarSubcursos(curso);
    } else {
      mostrarSemanas(curso);
    }
  }

  function mostrarSubcursos(curso) {
    document.getElementById('subcurso-container').classList.remove('hidden');
    document.getElementById('subcurso-title').innerText = `Subcursos de ${curso}`;
    const subcursoList = document.getElementById('subcurso-list');
    subcursoList.innerHTML = '';
    const subcursos = Object.keys(cursos[curso].subcursos);
    subcursos.forEach(sc => {
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `<h3>${sc}</h3>
                        <button onclick="abrirSubcurso('${sc}')">Ver semanas</button>`;
      subcursoList.appendChild(card);
    });
  }

  function abrirSubcurso(subcurso) {
    subcursoActual = subcurso;
    document.getElementById('subcurso-container').classList.add('hidden');
    mostrarSemanas(cursoActual, subcurso);
  }

  function mostrarSemanas(curso, subcurso=null) {
    document.getElementById('semana-container').classList.remove('hidden');
    let semanas;
    if (subcurso) {
      semanas = cursos[curso].subcursos[subcurso];
      document.getElementById('semana-title').innerText = `${curso} - ${subcurso} (Semanas)`;
    } else {
      semanas = cursos[curso].semanas;
      document.getElementById('semana-title').innerText = `${curso} (Semanas)`;
    }

    const semanaList = document.getElementById('semana-list');
    semanaList.innerHTML = '';
    semanas.forEach(s => {
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `<h3>Semana ${s.sem}</h3>
                        <p>${s.fisiologia || s.histologia || s.tema}</p>
                        <button onclick="abrirContenido('${curso}','${subcurso||''}',${s.sem})">Ver contenido</button>`;
      semanaList.appendChild(card);
    });
  }

  function abrirContenido(curso, subcurso, sem) {
    document.getElementById('semana-container').classList.add('hidden');
    document.getElementById('contenido-semana-container').classList.remove('hidden');

    let semanaObj;
    if (subcurso) {
      semanaObj = cursos[curso].subcursos[subcurso].find(s => s.sem === sem);
    } else {
      semanaObj = cursos[curso].semanas.find(s => s.sem === sem);
    }

    document.getElementById('contenido-title').innerText = `Semana ${sem}: ${semanaObj.tema || semanaObj.fisiologia || semanaObj.histologia}`;
  }

  function volverACursos() { mostrarCursos(); }
  function volverASubcurso() { document.getElementById('semana-container').classList.add('hidden'); mostrarSubcursos(cursoActual); }
  function volverASemanas() { document.getElementById('contenido-semana-container').classList.add('hidden'); mostrarSemanas(cursoActual, subcursoActual || null); }

</script>
<!-- PARTE 4 Y 5: LOGIN, ADMIN, CONTENIDO Y PROGRESO -->
<div id="login-container" class="container">
  <h2>Iniciar Sesi√≥n con Google</h2>
  <button onclick="loginGoogle()">Iniciar con Google</button>
</div>

<div id="admin-panel" class="container hidden">
  <h2>Panel de Administraci√≥n</h2>
  <button onclick="mostrarCursos()">Ver Cursos</button>
  <div style="margin-top:20px;">
    <h3>Agregar contenido a curso/semanas</h3>
    <input type="text" id="admin-curso" placeholder="Nombre del curso" />
    <input type="text" id="admin-subcurso" placeholder="Nombre del subcurso (opcional)" />
    <input type="number" id="admin-semana" placeholder="N√∫mero de semana" min="1" max="8" />
    <input type="text" id="admin-tipo" placeholder="Tipo: pdf, video, formulario" />
    <input type="text" id="admin-link" placeholder="URL del recurso o formulario" />
    <button onclick="agregarContenido()">Agregar Contenido</button>
  </div>
  <div style="margin-top:20px;">
    <h3>Ver Progreso de los Alumnos</h3>
    <input type="text" id="alumno-email" placeholder="Email del alumno" />
    <button onclick="verProgreso()">Ver Progreso</button>
    <div id="progreso-container"></div>
  </div>
</div>

<div id="cursos-container" class="container hidden">
  <h2>Cursos Disponibles</h2>
  <div id="cursos-list"></div>
</div>

<div id="subcurso-container" class="container hidden">
  <h2 id="subcurso-title"></h2>
  <div id="subcurso-list"></div>
  <button onclick="mostrarCursos()">Volver a cursos</button>
</div>

<div id="semana-container" class="container hidden">
  <h2 id="semana-title"></h2>
  <div id="semana-list"></div>
  <button onclick="subcursoActual ? volverASubcurso() : mostrarCursos()">Volver</button>
</div>

<div id="contenido-semana-container" class="container hidden">
  <h2 id="contenido-title"></h2>
  <div id="contenido-list"></div>
  <button onclick="volverASemanas()">Volver</button>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-app.js";
  import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-auth.js";
  import { getFirestore, doc, setDoc, getDoc, collection, getDocs, updateDoc, arrayUnion } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDAmEVU8J-uk2Yg6bL5n28xbP1771cHGME",
    authDomain: "neurovap53-cdbcf.firebaseapp.com",
    projectId: "neurovap53-cdbcf",
    storageBucket: "neurovap53-cdbcf.firebasestorage.app",
    messagingSenderId: "558340314022",
    appId: "1:558340314022:web:2027622d3b86af54ddb567"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);
  const provider = new GoogleAuthProvider();

  const adminEmail = "jamesucribanco333@gmail.com"; // solo este correo es admin

  function loginGoogle() {
    signInWithPopup(auth, provider)
      .then((result) => {
        const user = result.user;
        if(user.email === adminEmail){
          // admin
          document.getElementById('login-container').classList.add('hidden');
          document.getElementById('admin-panel').classList.remove('hidden');
        } else {
          // alumno
          document.getElementById('login-container').classList.add('hidden');
          mostrarCursos();
        }
      }).catch((error) => {
        alert("Error de login: " + error.message);
      });
  }

  // ------------------- ADMIN: AGREGAR CONTENIDO -------------------
  async function agregarContenido() {
    const curso = document.getElementById('admin-curso').value;
    const subcurso = document.getElementById('admin-subcurso').value || null;
    const semana = parseInt(document.getElementById('admin-semana').value);
    const tipo = document.getElementById('admin-tipo').value.toLowerCase();
    const link = document.getElementById('admin-link').value;

    if(!curso || !tipo || !link || !semana) return alert("Completa todos los campos");

    const docRef = doc(db, "cursos", curso + (subcurso ? "-" + subcurso : ""));
    await setDoc(docRef, {
      contenido: arrayUnion({
        semana, tipo, link
      })
    }, { merge:true });

    alert("Contenido agregado correctamente!");
  }

  // ------------------- ALUMNO: VER CONTENIDO -------------------
  async function abrirContenido(curso, subcurso, sem) {
    document.getElementById('semana-container').classList.add('hidden');
    document.getElementById('contenido-semana-container').classList.remove('hidden');

    let semanaObj;
    if (subcurso) {
      semanaObj = cursos[curso].subcursos[subcurso].find(s => s.sem === sem);
    } else {
      semanaObj = cursos[curso].semanas.find(s => s.sem === sem);
    }

    document.getElementById('contenido-title').innerText = `Semana ${sem}: ${semanaObj.tema || semanaObj.fisiologia || semanaObj.histologia}`;

    const contenidoList = document.getElementById('contenido-list');
    contenidoList.innerHTML = "";

    // mostrar contenido de Firestore
    const docRef = doc(db, "cursos", curso + (subcurso ? "-" + subcurso : ""));
    const docSnap = await getDoc(docRef);
    if(docSnap.exists()){
      const contenidos = docSnap.data().contenido || [];
      contenidos.filter(c => c.semana === sem).forEach(c => {
        let html = "";
        if(c.tipo === "pdf") html = `<a href="${c.link}" target="_blank">Ver PDF</a>`;
        if(c.tipo === "video") html = `<a href="${c.link}" target="_blank">Ver Video</a>`;
        if(c.tipo === "formulario") html = `<a href="${c.link}" target="_blank">Formulario</a>`;
        const div = document.createElement('div');
        div.className = "card";
        div.innerHTML = html;
        contenidoList.appendChild(div);
      });
    }
  }

  // ------------------- ADMIN: VER PROGRESO -------------------
  async function verProgreso() {
    const email = document.getElementById('alumno-email').value;
    if(!email) return alert("Ingresa un email");
    const progresoContainer = document.getElementById('progreso-container');
    progresoContainer.innerHTML = "";

    const alumnoRef = doc(db, "alumnos", email);
    const docSnap = await getDoc(alumnoRef);
    if(docSnap.exists()){
      const data = docSnap.data();
      for(const curso in data.progreso){
        const div = document.createElement('div');
        div.className = "card";
        div.innerHTML = `<h3>${curso}</h3><pre>${JSON.stringify(data.progreso[curso], null, 2)}</pre>`;
        progresoContainer.appendChild(div);
      }
    } else {
      progresoContainer.innerHTML = "No hay datos de progreso para este alumno.";
    }
  }

  // ------------------- GUARDAR AVANCE ALUMNOS -------------------
  async function guardarAvanceAlumno(email, curso, subcurso, semana, respuestas) {
    const alumnoRef = doc(db, "alumnos", email);
    await setDoc(alumnoRef, {
      progreso: {
        [curso + (subcurso ? "-" + subcurso : "")]: {
          [semana]: respuestas
        }
      }
    }, { merge:true });
  }

</script>
<!-- ================== PARTE 6: ADMIN, FORMULARIOS Y CIERRE ================== -->

<!-- PANEL ADMINISTRADOR -->
<div id="admin-panel" class="container hidden">
  <h2>Panel de Administrador</h2>
  <p>Desde aqu√≠ puedes agregar cursos, subcursos, semanas y contenido, adem√°s de crear formularios de "Apliquemos lo aprendido" y revisar avances de los alumnos.</p>

  <!-- Agregar Curso -->
  <div class="card">
    <h3>Agregar Curso</h3>
    <input type="text" id="nuevo-curso-nombre" placeholder="Nombre del curso" style="padding:8px; width:80%;">
    <button onclick="agregarCurso()">Agregar Curso</button>
  </div>

  <!-- Agregar Subcurso -->
  <div class="card">
    <h3>Agregar Subcurso a un Curso</h3>
    <select id="curso-seleccionado" style="padding:8px; width:80%;"></select>
    <input type="text" id="nuevo-subcurso-nombre" placeholder="Nombre del subcurso" style="padding:8px; width:80%;">
    <button onclick="agregarSubcurso()">Agregar Subcurso</button>
  </div>

  <!-- Agregar Semana -->
  <div class="card">
    <h3>Agregar Semana</h3>
    <select id="curso-semana" style="padding:8px; width:45%;"></select>
    <select id="subcurso-semana" style="padding:8px; width:45%;"></select>
    <input type="number" id="numero-semana" placeholder="N√∫mero de semana" style="padding:8px; width:30%;">
    <input type="text" id="tema-semana" placeholder="Tema o t√≠tulo" style="padding:8px; width:60%;">
    <button onclick="agregarSemana()">Agregar Semana</button>
  </div>

  <!-- Agregar Contenido (Grabaci√≥n / PDF / Preguntas) -->
  <div class="card">
    <h3>Agregar Contenido a Semana</h3>
    <select id="curso-contenido" style="padding:8px; width:30%;"></select>
    <select id="subcurso-contenido" style="padding:8px; width:30%;"></select>
    <input type="number" id="semana-contenido" placeholder="Semana" style="padding:8px; width:30%;">
    <input type="text" id="link-grabacion" placeholder="Link Grabaci√≥n" style="padding:8px; width:80%;">
    <input type="text" id="link-pdf" placeholder="Link PDF" style="padding:8px; width:80%;">
    <button onclick="agregarContenido()">Agregar Contenido</button>
  </div>

  <!-- Crear Formulario de "Apliquemos lo aprendido" -->
  <div class="card">
    <h3>Crear Formulario</h3>
    <select id="curso-formulario" style="padding:8px; width:45%;"></select>
    <select id="subcurso-formulario" style="padding:8px; width:45%;"></select>
    <input type="number" id="semana-formulario" placeholder="Semana" style="padding:8px; width:20%;">
    <textarea id="preguntas-formulario" placeholder="Escribe tus preguntas separadas por l√≠nea" style="width:90%; height:100px; padding:8px;"></textarea>
    <button onclick="crearFormulario()">Crear Formulario</button>
  </div>

  <!-- Ver Avance de Alumnos -->
  <div class="card">
    <h3>Avance de Alumnos</h3>
    <div id="avance-alumnos"></div>
    <button onclick="verAvanceAlumnos()">Actualizar Avance</button>
  </div>
</div>

<script>
  // Mostrar panel admin si es el correo de admin
  onAuthStateChanged(auth, (user) => {
    if(user && user.email === "jamesucribanco333@gmail.com"){
      document.getElementById('admin-panel').classList.remove('hidden');
      mostrarCursosSelects(); // Actualizar selects de cursos en admin
    }
  });

  // Funciones para admin
  function mostrarCursosSelects(){
    const selects = [
      'curso-seleccionado',
      'curso-semana',
      'curso-contenido',
      'curso-formulario'
    ];
    selects.forEach(id => {
      const select = document.getElementById(id);
      select.innerHTML = '';
      for(const curso in cursos){
        const opt = document.createElement('option');
        opt.value = curso;
        opt.text = curso;
        select.appendChild(opt);
      }
    });
    actualizarSubcursosAdmin();
  }

  function actualizarSubcursosAdmin(){
    const curso = document.getElementById('curso-seleccionado').value;
    const subSelects = ['subcurso-semana','subcurso-contenido','subcurso-formulario'];
    subSelects.forEach(id => {
      const select = document.getElementById(id);
      select.innerHTML = '';
      if(cursos[curso].subcursos){
        for(const sub in cursos[curso].subcursos){
          const opt = document.createElement('option');
          opt.value = sub;
          opt.text = sub;
          select.appendChild(opt);
        }
      }
    });
  }

  // Agregar curso
  function agregarCurso(){
    const nombre = document.getElementById('nuevo-curso-nombre').value;
    if(nombre && !cursos[nombre]){
      cursos[nombre] = { semanas: [] };
      alert("Curso agregado: " + nombre);
      mostrarCursosSelects();
    } else {
      alert("Curso ya existe o nombre inv√°lido");
    }
  }

  // Agregar subcurso
  function agregarSubcurso(){
    const curso = document.getElementById('curso-seleccionado').value;
    const subcurso = document.getElementById('nuevo-subcurso-nombre').value;
    if(subcurso && !cursos[curso].subcursos){
      cursos[curso].subcursos = {};
    }
    if(subcurso && !cursos[curso].subcursos[subcurso]){
      cursos[curso].subcursos[subcurso] = [];
      alert("Subcurso agregado: " + subcurso + " en " + curso);
      actualizarSubcursosAdmin();
    } else {
      alert("Subcurso ya existe o nombre inv√°lido");
    }
  }

  // Agregar semana
  function agregarSemana(){
    const curso = document.getElementById('curso-semana').value;
    const subcurso = document.getElementById('subcurso-semana').value;
    const sem = parseInt(document.getElementById('numero-semana').value);
    const tema = document.getElementById('tema-semana').value;
    if(subcurso){
      cursos[curso].subcursos[subcurso].push({sem:sem, tema:tema});
    } else {
      cursos[curso].semanas.push({sem:sem, tema:tema});
    }
    alert("Semana agregada!");
  }

  // Agregar contenido
  function agregarContenido(){
    const curso = document.getElementById('curso-contenido').value;
    const subcurso = document.getElementById('subcurso-contenido').value;
    const sem = parseInt(document.getElementById('semana-contenido').value);
    const grabacion = document.getElementById('link-grabacion').value;
    const pdf = document.getElementById('link-pdf').value;

    let semanaObj;
    if(subcurso){
      semanaObj = cursos[curso].subcursos[subcurso].find(s => s.sem === sem);
      if(semanaObj){
        semanaObj.grabacion = grabacion;
        semanaObj.pdf = pdf;
      }
    } else {
      semanaObj = cursos[curso].semanas.find(s => s.sem === sem);
      if(semanaObj){
        semanaObj.grabacion = grabacion;
        semanaObj.pdf = pdf;
      }
    }
    alert("Contenido agregado!");
  }

  // Crear formulario
  function crearFormulario(){
    const curso = document.getElementById('curso-formulario').value;
    const subcurso = document.getElementById('subcurso-formulario').value;
    const sem = parseInt(document.getElementById('semana-formulario').value);
    const preguntas = document.getElementById('preguntas-formulario').value.split('\n');
    
    let semanaObj;
    if(subcurso){
      semanaObj = cursos[curso].subcursos[subcurso].find(s => s.sem === sem);
      if(semanaObj){
        semanaObj.formulario = preguntas;
      }
    } else {
      semanaObj = cursos[curso].semanas.find(s => s.sem === sem);
      if(semanaObj){
        semanaObj.formulario = preguntas;
      }
    }
    alert("Formulario creado con " + preguntas.length + " preguntas");
  }

  // Ver avance de alumnos (simulado)
  function verAvanceAlumnos(){
    const cont = document.getElementById('avance-alumnos');
    cont.innerHTML = '';
    // Aqu√≠ se puede integrar Firestore para traer respuestas reales
    cont.innerHTML = '<p>Funci√≥n lista para mostrar avance de alumnos y respuestas correctas (pendiente integraci√≥n Firestore).</p>';
  }

  // Actualizar subcursos al cambiar curso
  document.getElementById('curso-seleccionado').addEventListener('change', actualizarSubcursosAdmin);
  document.getElementById('curso-semana').addEventListener('change', actualizarSubcursosAdmin);
  document.getElementById('curso-contenido').addEventListener('change', actualizarSubcursosAdmin);
  document.getElementById('curso-formulario').addEventListener('change', actualizarSubcursosAdmin);
</script>

</body>
</html>


