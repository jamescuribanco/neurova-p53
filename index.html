<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Neurova P53</title>

  <!-- Estilos generales -->
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
      background: #f8fbff;
      color: #1f2937;
    }

    header {
      background: linear-gradient(90deg, #e0f2fe, #bae6fd, #93c5fd);
      padding: 20px 40px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    header h1 {
      margin: 0;
      color: #0f172a;
      font-size: 28px;
      letter-spacing: 1px;
    }

    nav a {
      margin-left: 20px;
      text-decoration: none;
      color: #0f172a;
      font-weight: 500;
    }

    .container {
      max-width: 1100px;
      margin: 40px auto;
      padding: 0 20px;
    }

    .card {
      background: white;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.08);
      padding: 30px;
      margin-bottom: 20px;
      text-align: center;
    }

    .card h3 {
      color: #0077cc;
    }

    button {
      margin-top: 15px;
      padding: 12px 20px;
      border: none;
      border-radius: 12px;
      background: #0077cc;
      color: white;
      cursor: pointer;
    }

    button:hover {
      background: #005fa3;
    }

    .hidden {
      display: none;
    }

    .blocked {
      background: #ccc;
      color: #555;
      cursor: not-allowed;
    }

    footer {
      text-align: center;
      padding: 30px;
      color: #64748b;
    }

    .subcurso-btn {
      background: #f97316;
    }

    .subcurso-btn:hover {
      background: #ea580c;
    }

    h2 {
      color: #1e3a8a;
      margin-bottom: 20px;
    }
  </style>
<!-- ================== CURSOS, SUBCURSOS Y SEMANAS ================== -->
<!-- Contenedor de Subcursos -->
<div id="subcurso-container" class="container hidden">
  <h2 id="subcurso-title"></h2>
  <div id="subcurso-list" style="display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px;"></div>
  <button onclick="volverACursos()" style="margin-top:20px; padding:10px 20px; background:#2563eb; color:white; border:none; border-radius:10px; cursor:pointer;">Volver a Cursos</button>
</div>

<!-- Contenedor de Semanas -->
<div id="semana-container" class="container hidden">
  <h2 id="semana-title"></h2>
  <div id="semana-list" style="display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px;"></div>
  <button onclick="volverASubcurso()" style="margin-top:20px; padding:10px 20px; background:#2563eb; color:white; border:none; border-radius:10px; cursor:pointer;">Volver a Subcursos</button>
</div>

<!-- Contenedor de Contenido Semana -->
<div id="contenido-semana-container" class="container hidden">
  <h2 id="contenido-title"></h2>
  <div style="margin-top:20px;">
    <button id="btn-grabacion" style="margin-right:10px; padding:10px 15px; background:#10b981; color:white; border:none; border-radius:8px; cursor:pointer;">üìπ Grabaci√≥n</button>
    <button id="btn-pdf" style="margin-right:10px; padding:10px 15px; background:#3b82f6; color:white; border:none; border-radius:8px; cursor:pointer;">üìÑ PDF</button>
    <button id="btn-formulario" style="padding:10px 15px; background:#f59e0b; color:white; border:none; border-radius:8px; cursor:pointer;">üìù Apliquemos lo aprendido</button>
  </div>
  <button onclick="volverASemanas()" style="margin-top:20px; padding:10px 20px; background:#2563eb; color:white; border:none; border-radius:10px; cursor:pointer;">Volver a Semanas</button>
</div>

<script>
let cursoActual = '';
let subcursoActual = '';

const cursosData = {
  "Morfofisiolog√≠a 1": {
    semanas: [
      {sem:1, fisiologia:"Membrana celular, receptores, canales, transporte y potenciales de membrana/acci√≥n. Regularizaci√≥n y se√±alizaci√≥n celular.", histologia:"Procesamiento histol√≥gico, membrana celular, organelas y n√∫cleo. Desarrollo embrionario del esqueleto y tejido cartilaginoso."},
      {sem:2, fisiologia:"Transmisi√≥n de se√±ales celulares. Composici√≥n y regulaci√≥n del medio interno, √≥smosis y l√≠quidos corporales.", histologia:"Tejido √≥seo y osificaci√≥n. Origen embrionario del sistema muscular y Tejido muscular I."},
      {sem:3, fisiologia:"Neurotransmisores, receptores y sinapsis. Contracci√≥n y excitaci√≥n muscular.", histologia:"Tejido muscular II. Neurohistog√©nesis y tejido nervioso."},
      {sem:4, fisiologia:"Metabolismo √≥seo. Evaluaci√≥n Parcial.", histologia:"Introducci√≥n al sistema vascular. Evaluaci√≥n Parcial."},
      {sem:5, fisiologia:"Sangre y sus propiedades, hematopoyesis, eritropoyesis y hemograma. Fisiolog√≠a eritrocitaria I (membrana, metabolismo y hemoglobina).", histologia:"Tejido epitelial de revestimiento. Tejido epitelial glandular."},
      {sem:6, fisiologia:"Fisiolog√≠a eritrocitaria II (hierro, Vit B12 y B9). Fisiolog√≠a plaquetaria, hemostasia y fibrin√≥lisis.", histologia:"Matriz extracelular, tejido conectivo y tejido adiposo. Tejido sangu√≠neo y hematopoyesis."},
      {sem:7, fisiologia:"Generalidades del sistema inmunol√≥gico, respuesta innata y fagocitosis. Inmunidad adquirida, linfocitos T y B, y grupos sangu√≠neos.", histologia:"Tejido linfoide y MALT. √ìrganos linfoides."},
      {sem:8, fisiologia:"Respuesta inflamatoria, tolerancia e hipersensibilidad. Evaluaci√≥n Final.", histologia:"Sistema tegumentario y sus anexos. Evaluaci√≥n Final."}
    ]
  },
  "Morfofisiolog√≠a 2": {
    subcursos:{
      "Anatom√≠a": [
        {sem:1, tema:"Pared tor√°cica, regi√≥n mamaria y radioanatom√≠a de t√≥rax."},
        {sem:2, tema:"Mediastino superior, anterior y medio (pericardio y morfolog√≠a externa)."},
        {sem:3, tema:"Mediastino medio II (morfolog√≠a interna y conducci√≥n) y radioanatom√≠a cardiaca."},
        {sem:4, tema:"Mediastino posterior y radioanatom√≠a del mediastino posterior. Examen Parcial."},
        {sem:5, tema:"Pulmones (segmentaci√≥n e inervaci√≥n) y radioanatom√≠a pulmonar."},
        {sem:6, tema:"Columna vertebral dorsal y m√∫sculos paravertebrales."},
        {sem:7, tema:"Radioanatom√≠a de columna tor√°cica, anatom√≠a del ri√±√≥n y v√≠as urinarias."},
        {sem:8, tema:"Radioanatom√≠a del ri√±√≥n y v√≠as urinarias. Examen Final."}
      ],
      "Fisiolog√≠a": [
        {sem:1, tema:"Hemodinamia y electrofisiolog√≠a cardiaca."},
        {sem:2, tema:"Electrocardiograma I, contracci√≥n y ciclo cardiaco."},
        {sem:3, tema:"Presi√≥n arterial, gasto cardiaco, retorno venoso y circulaciones especiales."},
        {sem:4, tema:"Mec√°nica respiratoria, vol√∫menes y capacidades. Examen Parcial."},
        {sem:5, tema:"Intercambio de gases, transporte de O‚ÇÇ/CO‚ÇÇ, control respiratorio y circulaci√≥n pulmonar."},
        {sem:6, tema:"Estructura renal, aclaramiento, filtraci√≥n glomerular, reabsorci√≥n y secreci√≥n renal."},
        {sem:7, tema:"Regulaci√≥n de electrolitos, volumen, equilibrio √°cido-base y diur√©ticos."},
        {sem:8, tema:"Fisiolog√≠a de la aviaci√≥n, grandes alturas y buceo profundo. Examen Final."}
      ],
      "Histolog√≠a": [
        {sem:1, tema:"Embriolog√≠a cardiovascular e histolog√≠a del coraz√≥n y v√°lvulas."},
        {sem:2, tema:"Histolog√≠a vascular (arterias, capilares, venas y linf√°ticos)."},
        {sem:3, tema:"Integraci√≥n de embriolog√≠a e histolog√≠a card√≠aca."},
        {sem:4, tema:"Integraci√≥n de histolog√≠a vascular. Examen Parcial."},
        {sem:5, tema:"Embriolog√≠a e histolog√≠a del aparato respiratorio (I y II)."},
        {sem:6, tema:"Embriolog√≠a urinaria e histolog√≠a del ri√±√≥n y la pelvis renal."},
        {sem:7, tema:"Histolog√≠a de ur√©ter, vejiga y uretra; malformaciones cong√©nitas renales."},
        {sem:8, tema:"Histopatolog√≠a renal y de las v√≠as urinarias. Examen Final."}
      ]
    }
  },
  "Anatom√≠a General": {
    semanas:[
      {sem:1, tema:"Hombro, Axila, Brazo y Codo."},
      {sem:2, tema:"Antebrazo, Mu√±eca y Mano."},
      {sem:3, tema:"Regi√≥n Gl√∫tea, Cadera, Muslo y Rodilla."},
      {sem:4, tema:"Pierna, Regi√≥n Popl√≠tea, Tobillo y Pie."},
      {sem:5, tema:"V√©rtebras cervicales, regiones y tri√°ngulos del cuello."},
      {sem:6, tema:"V√≠sceras del cuello, Cabeza √≥sea (Neuro/Viscerocr√°neo)."},
      {sem:7, tema:"M√∫sculos m√≠mica/masticaci√≥n y Regiones profundas de la cara."},
      {sem:8, tema:"Cavidad oral, fosas nasales y paredes de tronco."}
    ]
  },
  "Biolog√≠a Celular y Molecular": {
    subcursos:{
      "Teor√≠a": [
        {sem:1, tema:"Niveles de organizaci√≥n, Bioelementos, Enlaces qu√≠micos y Agua. Gl√∫cidos y L√≠pidos."},
        {sem:2, tema:"Amino√°cidos, Prote√≠nas y Enzimas. Dogma Central: Estructura del ADN y ARN."},
        {sem:3, tema:"La C√©lula: Evoluci√≥n (Proca vs. Euca) y Membrana Celular. Transporte de membrana (Pasivo/Activo)."},
        {sem:4, tema:"Citoesqueleto, Matriz Extracelular y Uniones celulares. Evaluaci√≥n Parcial."},
        {sem:5, tema:"Sistema de Endomembranas (RER, REL, Golgi) y Digesti√≥n Celular (Lisosomas/Peroxisomas). Mitocondrias y Bioenerg√©tica."},
        {sem:6, tema:"N√∫cleo Celular, Cromatina y Replicaci√≥n del ADN. Transcripci√≥n y Procesamiento de ARN."},
        {sem:7, tema:"Traducci√≥n (S√≠ntesis de Prote√≠nas). Ciclo Celular, Mitosis, Meiosis y Apoptosis."},
        {sem:8, tema:"Se√±alizaci√≥n celular, Introducci√≥n al C√°ncer y Gen√©tica Molecular. Evaluaci√≥n Final."}
      ],
      "Laboratorio": [
        {sem:1, tema:"Normas de Bioseguridad y Manejo del Microscopio. Identificaci√≥n de Gl√∫cidos y L√≠pidos."},
        {sem:2, tema:"Identificaci√≥n de Prote√≠nas y Enzimas. Extracci√≥n de ADN."},
        {sem:3, tema:"C√©lula Procariota y Eucariota. Permeabilidad de la Membrana Celular (Di√°lisis)."},
        {sem:4, tema:"Diversidad Celular y Diferenciaci√≥n. Evaluaci√≥n Parcial."},
        {sem:5, tema:"Fraccionamiento Celular. Respiraci√≥n Celular (Fermentaci√≥n)."},
        {sem:6, tema:"Observaci√≥n de N√∫cleo y Corp√∫sculo de Barr. Soluciones y Diluciones."},
        {sem:7, tema:"S√≠ntesis de Prote√≠nas (Simulaci√≥n). Mitosis y Meiosis (C√©lulas vegetales/animales)."},
        {sem:8, tema:"Tecnolog√≠a del ADN Recombinante (Simulaci√≥n). Evaluaci√≥n Final."}
      ]
    }
  },
  "Bioqu√≠mica": {
    subcursos:{
      "Teor√≠a": [
        {sem:1, tema:"Bioelementos y Biomol√©culas: Agua, pH, soluciones buffer, bioelementos y vitaminas. Estructuras supramoleculares."},
        {sem:2, tema:"Amino√°cidos y Prote√≠nas: Estructura, clasificaci√≥n y propiedades. Plegamiento y desnaturalizaci√≥n."},
        {sem:3, tema:"Enzimas y Cin√©tica: Energ√≠a de activaci√≥n y factores que afectan la actividad enzim√°tica. Evaluaci√≥n Continua 1."},
        {sem:4, tema:"Metabolismo de Carbohidratos: Glic√≥lisis, ciclo de la urea y degradaci√≥n de amino√°cidos. Evaluaci√≥n Parcial."},
        {sem:5, tema:"Gluc√≥geno y Bioenerg√©tica: S√≠ntesis/degradaci√≥n de gluc√≥geno, ciclo de Krebs y fosforilaci√≥n oxidativa."},
        {sem:6, tema:"Metabolismo de L√≠pidos: Lipog√©nesis, beta-oxidaci√≥n y s√≠ntesis de triglic√©ridos. Evaluaci√≥n Continua 2."},
        {sem:7, tema:"Colesterol y √Åcidos Nucleicos: S√≠ntesis de colesterol, estructura de ADN/ARN y replicaci√≥n."},
        {sem:8, tema:"S√≠ntesis de Prote√≠nas: Transcripci√≥n y traducci√≥n. Presentaci√≥n de situaci√≥n cl√≠nica. Evaluaci√≥n Final."}
      ],
      "Laboratorio": [
        {sem:1, tema:"Espectrofotometr√≠a: Principios de bioseguridad y determinaci√≥n de concentraci√≥n de compuestos."},
        {sem:2, tema:"Prote√≠nas totales: Determinaci√≥n de prote√≠nas totales, alb√∫mina y globulinas en suero."},
        {sem:3, tema:"Degradaci√≥n de prote√≠nas y factores que afectan la actividad enzim√°tica."},
        {sem:4, tema:"Concentraci√≥n de urea: Determinaci√≥n en suero e identificaci√≥n de biomol√©culas. Evaluaci√≥n Parcial."},
        {sem:5, tema:"Metabolismo en ayuno/postprandial: Evaluaci√≥n de rutas metab√≥licas en condiciones de alimentaci√≥n."},
        {sem:6, tema:"Digesti√≥n y Hidr√≥lisis: Digesti√≥n enzim√°tica del almid√≥n e hidr√≥lisis de l√≠pidos."},
        {sem:7, tema:"Perfil Lip√≠dico: Determinaci√≥n de triglic√©ridos, colesterol y lipoprote√≠nas en suero."},
        {sem:8, tema:"√Åcido √örico y ADN: Extracci√≥n de ADN y determinaci√≥n de √°cido √∫rico en suero. Evaluaci√≥n Final."}
      ]
    }
  }
};

// ================== FUNCIONES ==================
function mostrarCursos() {
  const cursosList = document.getElementById('cursos-list');
  cursosList.innerHTML = '';
  for (const curso in cursosData) {
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `<h3>${curso}</h3>
                      <button onclick="abrirCurso('${curso}')">Entrar al curso</button>`;
    cursosList.appendChild(card);
  }
  document.getElementById('cursos-container').classList.remove('hidden');
  document.getElementById('subcurso-container').classList.add('hidden');
  document.getElementById('semana-container').classList.add('hidden');
  document.getElementById('contenido-semana-container').classList.add('hidden');
}

function abrirCurso(curso) {
  cursoActual = curso;
  const tieneSubcursos = cursosData[curso].subcursos !== undefined;
  document.getElementById('cursos-container').classList.add('hidden');
  if (tieneSubcursos) {
    mostrarSubcursos(curso);
  } else {
    mostrarSemanas(curso);
  }
}

function mostrarSubcursos(curso) {
  document.getElementById('subcurso-container').classList.remove('hidden');
  document.getElementById('subcurso-title').innerText = `Subcursos de ${curso}`;
  const subcursoList = document.getElementById('subcurso-list');
  subcursoList.innerHTML = '';
  const subcursos = Object.keys(cursosData[curso].subcursos);
  subcursos.forEach(sc => {
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `<h3>${sc}</h3><button onclick="abrirSubcurso('${sc}')">Ver semanas</button>`;
    subcursoList.appendChild(card);
  });
}

function abrirSubcurso(subcurso) {
  subcursoActual = subcurso;
  document.getElementById('subcurso-container').classList.add('hidden');
  mostrarSemanas(cursoActual, subcurso);
}

function mostrarSemanas(curso, subcurso=null) {
  document.getElementById('semana-container').classList.remove('hidden');
  let semanas;
  if(subcurso) {
    semanas = cursosData[curso].subcursos[subcurso];
    document.getElementById('semana-title').innerText = `${curso} - ${subcurso} (Semanas)`;
  } else {
    semanas = cursosData[curso].semanas;
    document.getElementById('semana-title').innerText = `${curso} (Semanas)`;
  }

  const semanaList = document.getElementById('semana-list');
  semanaList.innerHTML = '';
  semanas.forEach(s => {
    const card = document.createElement('div');
    card.className = 'card';
    const descripcion = s.fisiologia || s.histologia || s.tema;
    card.innerHTML = `<h3>Semana ${s.sem}</h3><p>${descripcion}</p>
                      <button onclick="abrirContenido('${curso}','${subcurso||''}',${s.sem})">Ver contenido</button>`;
    semanaList.appendChild(card);
  });
}

function abrirContenido(curso, subcurso, sem) {
  document.getElementById('semana-container').classList.add('hidden');
  document.getElementById('contenido-semana-container').classList.remove('hidden');

  let semanaObj;
  if(subcurso) semanaObj = cursosData[curso].subcursos[subcurso].find(s=>s.sem===sem);
  else semanaObj = cursosData[curso].semanas.find(s=>s.sem===sem);

  document.getElementById('contenido-title').innerText = `Semana ${sem}: ${semanaObj.fisiologia||semanaObj.histologia||semanaObj.tema}`;

  document.getElementById('btn-grabacion').onclick = () => alert(`Reproducir grabaci√≥n de ${semanaObj.fisiologia||semanaObj.histologia||semanaObj.tema}`);
  document.getElementById('btn-pdf').onclick = () => alert(`Abrir PDF de ${semanaObj.fisiologia||semanaObj.histologia||semanaObj.tema}`);
  document.getElementById('btn-formulario').onclick = () => alert(`Formulario de preguntas para ${semanaObj.fisiologia||semanaObj.histologia||semanaObj.tema}`);
}

function volverACursos(){ mostrarCursos(); }
function volverASubcurso(){ document.getElementById('semana-container').classList.add('hidden'); mostrarSubcursos(cursoActual); }
function volverASemanas(){ document.getElementById('contenido-semana-container').classList.add('hidden'); mostrarSemanas(cursoActual, subcursoActual||null); }

</script>
<!-- ================== PANEL ADMINISTRADOR ================== -->
<div id="admin-container" class="container hidden">
  <h2>Panel de Administrador</h2>

  <!-- Selecci√≥n de Curso -->
  <div style="margin-bottom:20px;">
    <label for="admin-curso">Selecciona un curso:</label>
    <select id="admin-curso" style="margin-left:10px; padding:5px;">
      <option value="">--Curso--</option>
    </select>
  </div>

  <!-- Selecci√≥n de Subcurso -->
  <div style="margin-bottom:20px;">
    <label for="admin-subcurso">Selecciona un subcurso:</label>
    <select id="admin-subcurso" style="margin-left:10px; padding:5px;">
      <option value="">--Subcurso--</option>
    </select>
  </div>

  <!-- Selecci√≥n de Semana -->
  <div style="margin-bottom:20px;">
    <label for="admin-semana">Selecciona una semana:</label>
    <select id="admin-semana" style="margin-left:10px; padding:5px;">
      <option value="">--Semana--</option>
    </select>
  </div>

  <!-- Botones para agregar contenido -->
  <div style="margin-bottom:20px;">
    <button onclick="agregarGrabacion()" style="padding:8px 15px; background:#10b981; color:white; border:none; border-radius:8px; cursor:pointer; margin-right:10px;">üìπ A√±adir Grabaci√≥n</button>
    <button onclick="agregarPDF()" style="padding:8px 15px; background:#3b82f6; color:white; border:none; border-radius:8px; cursor:pointer; margin-right:10px;">üìÑ A√±adir PDF</button>
    <button onclick="crearFormulario()" style="padding:8px 15px; background:#f59e0b; color:white; border:none; border-radius:8px; cursor:pointer;">üìù Crear Formulario</button>
  </div>

  <hr style="margin:20px 0;">

  <!-- Avance de Alumnos -->
  <h3>Progreso de Alumnos</h3>
  <div id="alumnos-list">
    <p>No hay alumnos registrados a√∫n.</p>
  </div>

  <button onclick="volverInicioAdmin()" style="margin-top:20px; padding:10px 20px; background:#2563eb; color:white; border:none; border-radius:10px; cursor:pointer;">Volver al inicio</button>
</div>

<script>
// ================== ADMIN FUNCIONES ==================
const adminCursoSelect = document.getElementById('admin-curso');
const adminSubcursoSelect = document.getElementById('admin-subcurso');
const adminSemanaSelect = document.getElementById('admin-semana');
const alumnosList = document.getElementById('alumnos-list');

// Inicializar cursos en panel admin
function inicializarAdmin() {
  adminCursoSelect.innerHTML = '<option value="">--Curso--</option>';
  Object.keys(cursosData).forEach(curso => {
    const opt = document.createElement('option');
    opt.value = curso;
    opt.innerText = curso;
    adminCursoSelect.appendChild(opt);
  });
}

adminCursoSelect.addEventListener('change', ()=>{
  const curso = adminCursoSelect.value;
  adminSubcursoSelect.innerHTML = '<option value="">--Subcurso--</option>';
  adminSemanaSelect.innerHTML = '<option value="">--Semana--</option>';

  if(curso && cursosData[curso].subcursos){
    Object.keys(cursosData[curso].subcursos).forEach(sc=>{
      const opt = document.createElement('option');
      opt.value = sc;
      opt.innerText = sc;
      adminSubcursoSelect.appendChild(opt);
    });
  } else if(curso){
    // Si no hay subcursos, llenar semanas directamente
    cursosData[curso].semanas.forEach(s=>{
      const opt = document.createElement('option');
      opt.value = s.sem;
      opt.innerText = `Semana ${s.sem}`;
      adminSemanaSelect.appendChild(opt);
    });
  }
});

adminSubcursoSelect.addEventListener('change', ()=>{
  const curso = adminCursoSelect.value;
  const subcurso = adminSubcursoSelect.value;
  adminSemanaSelect.innerHTML = '<option value="">--Semana--</option>';
  if(curso && subcurso){
    cursosData[curso].subcursos[subcurso].forEach(s=>{
      const opt = document.createElement('option');
      opt.value = s.sem;
      opt.innerText = `Semana ${s.sem}`;
      adminSemanaSelect.appendChild(opt);
    });
  }
});

// Funciones para agregar contenido
function agregarGrabacion(){
  const curso = adminCursoSelect.value;
  const subcurso = adminSubcursoSelect.value;
  const semana = adminSemanaSelect.value;
  if(!curso || !semana) return alert("Selecciona curso y semana primero.");
  const url = prompt("Ingrese URL de la grabaci√≥n:");
  if(url) alert(`Grabaci√≥n a√±adida a ${curso} ${subcurso||''} Semana ${semana}: ${url}`);
}

function agregarPDF(){
  const curso = adminCursoSelect.value;
  const subcurso = adminSubcursoSelect.value;
  const semana = adminSemanaSelect.value;
  if(!curso || !semana) return alert("Selecciona curso y semana primero.");
  const url = prompt("Ingrese URL del PDF:");
  if(url) alert(`PDF a√±adido a ${curso} ${subcurso||''} Semana ${semana}: ${url}`);
}

function crearFormulario(){
  const curso = adminCursoSelect.value;
  const subcurso = adminSubcursoSelect.value;
  const semana = adminSemanaSelect.value;
  if(!curso || !semana) return alert("Selecciona curso y semana primero.");
  const numPreguntas = prompt("¬øCu√°ntas preguntas tendr√° el formulario?");
  if(numPreguntas){
    let preguntas = [];
    for(let i=1;i<=numPreguntas;i++){
      const q = prompt(`Ingrese la pregunta ${i}:`);
      const r = prompt(`Ingrese la respuesta correcta de la pregunta ${i}:`);
      preguntas.push({pregunta:q,respuesta:r});
    }
    alert(`Formulario creado con ${numPreguntas} preguntas para ${curso} ${subcurso||''} Semana ${semana}`);
    // Guardar formulario temporalmente (para ejemplo)
    if(!cursosData[curso].formularios) cursosData[curso].formularios = {};
    if(subcurso){
      if(!cursosData[curso].formularios[subcurso]) cursosData[curso].formularios[subcurso]={};
      cursosData[curso].formularios[subcurso][semana] = preguntas;
    } else {
      if(!cursosData[curso].formularios['general']) cursosData[curso].formularios['general']={};
      cursosData[curso].formularios['general'][semana] = preguntas;
    }
  }
}

// Mostrar progreso de alumnos (simulado)
function mostrarProgreso(alumnos){
  alumnosList.innerHTML = '';
  if(alumnos.length===0){
    alumnosList.innerHTML='<p>No hay alumnos registrados a√∫n.</p>';
    return;
  }
  alumnos.forEach(a=>{
    const div = document.createElement('div');
    div.style.border='1px solid #ccc';
    div.style.padding='10px';
    div.style.marginBottom='10px';
    div.innerHTML = `<strong>${a.nombre}</strong> - Curso: ${a.curso} - Semana: ${a.semana}<br>
                     Avance: ${a.avance}%<br>
                     Respuestas correctas: ${a.correctas}/${a.total}`;
    alumnosList.appendChild(div);
  });
}

// Volver al inicio de admin
function volverInicioAdmin(){
  document.getElementById('admin-container').classList.add('hidden');
  mostrarCursos();
}

// Inicializamos
inicializarAdmin();

// Ejemplo de alumnos simulados
const alumnosSimulados = [
  {nombre:'Juan', curso:'Morfofisiolog√≠a 1', semana:3, avance:50, correctas:3, total:5},
  {nombre:'Maria', curso:'Bioqu√≠mica', semana:2, avance:80, correctas:4, total:5}
];
mostrarProgreso(alumnosSimulados);
</script>
<!-- ADMIN PANEL -->
<div id="admin-panel" class="container card hidden" style="margin-top:40px;">
  <h2>Panel de Administraci√≥n</h2>

  <div style="margin-bottom:20px;">
    <label>Seleccionar Curso:</label>
    <select id="admin-curso-select">
      <option value="">--Seleccione Curso--</option>
      <option value="Morfofisiolog√≠a 1">Morfofisiolog√≠a 1</option>
      <option value="Morfofisiolog√≠a 2">Morfofisiolog√≠a 2</option>
      <option value="Anatom√≠a General">Anatom√≠a General</option>
      <option value="Biolog√≠a Celular y Molecular">Biolog√≠a Celular y Molecular</option>
      <option value="Bioqu√≠mica">Bioqu√≠mica</option>
    </select>
  </div>

  <div style="margin-bottom:20px;">
    <label>Subcurso (si aplica):</label>
    <select id="admin-subcurso-select">
      <option value="">--Seleccione Subcurso--</option>
    </select>
  </div>

  <div style="margin-bottom:20px;">
    <label>Semana:</label>
    <select id="admin-semana-select">
      <option value="">--Seleccione Semana--</option>
      <option value="1">Semana 1</option>
      <option value="2">Semana 2</option>
      <option value="3">Semana 3</option>
      <option value="4">Semana 4</option>
      <option value="5">Semana 5</option>
      <option value="6">Semana 6</option>
      <option value="7">Semana 7</option>
      <option value="8">Semana 8</option>
    </select>
  </div>

  <div style="margin-bottom:20px;">
    <button onclick="agregarGrabacion()">Agregar Grabaci√≥n</button>
    <button onclick="agregarPDF()">Agregar PDF</button>
    <button onclick="crearFormulario()">Crear Formulario</button>
  </div>

  <h3>Progreso de Alumnos</h3>
  <div id="alumnos-list"></div>
</div>

<script>
  const adminCursoSelect = document.getElementById('admin-curso-select');
  const adminSubcursoSelect = document.getElementById('admin-subcurso-select');
  const adminSemanaSelect = document.getElementById('admin-semana-select');
  const alumnosList = document.getElementById('alumnos-list');

  // Cargar subcursos din√°micamente
  adminCursoSelect.addEventListener('change', ()=>{
    const curso = adminCursoSelect.value;
    adminSubcursoSelect.innerHTML = '<option value="">--Seleccione Subcurso--</option>';
    if(cursosData[curso] && cursosData[curso].subcursos){
      Object.keys(cursosData[curso].subcursos).forEach(sc=>{
        const opt = document.createElement('option');
        opt.value=sc;
        opt.innerText=sc;
        adminSubcursoSelect.appendChild(opt);
      });
    }
  });
</script>
<!-- CURSOS ALUMNOS -->
<div id="cursos-container" class="container hidden">
  <h2>Cursos Disponibles</h2>
  <div id="cursos-list" style="display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px;"></div>
</div>

<div id="subcurso-container" class="container hidden">
  <h2 id="subcurso-title"></h2>
  <div id="subcurso-list" style="display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px;"></div>
  <button onclick="volverACursos()" style="margin-top:20px; padding:10px 20px; background:#2563eb; color:white; border:none; border-radius:10px; cursor:pointer;">Volver a Cursos</button>
</div>

<div id="semana-container" class="container hidden">
  <h2 id="semana-title"></h2>
  <div id="semana-list" style="display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px;"></div>
  <button onclick="volverASubcurso()" style="margin-top:20px; padding:10px 20px; background:#2563eb; color:white; border:none; border-radius:10px; cursor:pointer;">Volver a Subcursos</button>
</div>

<div id="contenido-semana-container" class="container hidden">
  <h2 id="contenido-title"></h2>
  <div id="material-buttons" style="margin-top:20px;"></div>
  <button onclick="volverASemanas()" style="margin-top:20px; padding:10px 20px; background:#2563eb; color:white; border:none; border-radius:10px; cursor:pointer;">Volver a Semanas</button>
</div>

<script>
  let cursoActual='', subcursoActual='';

  function mostrarCursos(){
    document.getElementById('cursos-container').classList.remove('hidden');
    document.getElementById('subcurso-container').classList.add('hidden');
    document.getElementById('semana-container').classList.add('hidden');
    document.getElementById('contenido-semana-container').classList.add('hidden');

    const cursosList = document.getElementById('cursos-list');
    cursosList.innerHTML='';
    Object.keys(cursosData).forEach(curso=>{
      const card=document.createElement('div');
      card.className='card';
      card.innerHTML=`<h3>${curso}</h3>
                      <button onclick="abrirCurso('${curso}')">Entrar al curso</button>`;
      cursosList.appendChild(card);
    });
  }

  function abrirCurso(curso){
    cursoActual=curso;
    const tieneSubcursos = cursosData[curso].subcursos!==undefined;
    document.getElementById('cursos-container').classList.add('hidden');
    if(tieneSubcursos) mostrarSubcursos(curso);
    else mostrarSemanas(curso);
  }

  function mostrarSubcursos(curso){
    document.getElementById('subcurso-container').classList.remove('hidden');
    document.getElementById('subcurso-title').innerText=`Subcursos de ${curso}`;
    const subcursoList=document.getElementById('subcurso-list');
    subcursoList.innerHTML='';
    Object.keys(cursosData[curso].subcursos).forEach(sc=>{
      const card=document.createElement('div');
      card.className='card';
      card.innerHTML=`<h3>${sc}</h3>
                      <button onclick="abrirSubcurso('${sc}')">Ver semanas</button>`;
      subcursoList.appendChild(card);
    });
  }

  function abrirSubcurso(subcurso){
    subcursoActual=subcurso;
    document.getElementById('subcurso-container').classList.add('hidden');
    mostrarSemanas(cursoActual, subcurso);
  }

  function mostrarSemanas(curso, subcurso=null){
    document.getElementById('semana-container').classList.remove('hidden');
    let semanas;
    if(subcurso){
      semanas = cursosData[curso].subcursos[subcurso];
      document.getElementById('semana-title').innerText=`${curso} - ${subcurso} (Semanas)`;
    } else{
      semanas = cursosData[curso].semanas;
      document.getElementById('semana-title').innerText=`${curso} (Semanas)`;
    }

    const semanaList=document.getElementById('semana-list');
    semanaList.innerHTML='';
    semanas.forEach(s=>{
      const card=document.createElement('div');
      card.className='card';
      card.innerHTML=`<h3>Semana ${s.sem}</h3>
                      <p>${s.fisiologia||s.histologia||s.tema}</p>
                      <button onclick="abrirContenido('${curso}','${subcurso||''}',${s.sem})">Ver contenido</button>`;
      semanaList.appendChild(card);
    });
  }

  function volverACursos(){ mostrarCursos(); }
  function volverASubcurso(){
    document.getElementById('semana-container').classList.add('hidden');
    mostrarSubcursos(cursoActual);
  }
  function volverASemanas(){
    document.getElementById('contenido-semana-container').classList.add('hidden');
    mostrarSemanas(cursoActual, subcursoActual||null);
  }

  // Inicializar vista de cursos para alumnos
  mostrarCursos();
</script>
<!-- ================== PARTE 6: CIERRE FINAL Y FUNCIONALIDAD ADMIN/ALUMNO ================== -->

<!-- FOOTER -->
<footer>
  <p>¬© 2026 Neurova P53. Todos los derechos reservados.</p>
</footer>

<!-- MODAL ADMIN PARA AGREGAR RECURSOS -->
<div id="admin-modal" class="hidden" style="position:fixed; top:0; left:0; width:100%; height:100%; 
    background:rgba(0,0,0,0.6); display:flex; justify-content:center; align-items:center; z-index:999;">
  <div style="background:white; padding:30px; border-radius:16px; width:500px; max-width:90%;">
    <h2>Agregar recurso</h2>
    <label>Tipo de recurso:</label>
    <select id="tipo-recurso">
      <option value="grabacion">Grabaci√≥n</option>
      <option value="pdf">PDF</option>
      <option value="formulario">Formulario</option>
    </select>
    <br><br>
    <label>T√≠tulo / Nombre:</label>
    <input type="text" id="recurso-titulo" style="width:100%; padding:8px; margin-top:5px; border-radius:8px; border:1px solid #ccc;">
    <br><br>
    <label>URL / ID (si aplica):</label>
    <input type="text" id="recurso-url" style="width:100%; padding:8px; margin-top:5px; border-radius:8px; border:1px solid #ccc;">
    <br><br>
    <button onclick="guardarRecursoAdmin()" style="background:#10b981;">Guardar</button>
    <button onclick="cerrarModalAdmin()" style="background:#ef4444;">Cancelar</button>
  </div>
</div>

<!-- SCRIPTS FINALES PARA ADMIN/ALUMNO -->
<script>
  // Variables globales
  let recursos = {}; // {curso: {subcurso: {semana: [recurso1, recurso2]}}}
  let formularios = {}; // {curso: {subcurso: {semana: [preguntas]}}}

  // Funciones del modal admin
  function abrirModalAdmin() {
    document.getElementById('admin-modal').classList.remove('hidden');
  }

  function cerrarModalAdmin() {
    document.getElementById('admin-modal').classList.add('hidden');
  }

  function guardarRecursoAdmin() {
    const tipo = document.getElementById('tipo-recurso').value;
    const titulo = document.getElementById('recurso-titulo').value;
    const url = document.getElementById('recurso-url').value;
    if(!cursoActual || !subcursoActual || !semanaActual) { alert("Selecciona curso, subcurso y semana"); return; }

    if(!recursos[cursoActual]) recursos[cursoActual] = {};
    if(!recursos[cursoActual][subcursoActual]) recursos[cursoActual][subcursoActual] = {};
    if(!recursos[cursoActual][subcursoActual][semanaActual]) recursos[cursoActual][subcursoActual][semanaActual] = [];

    recursos[cursoActual][subcursoActual][semanaActual].push({tipo, titulo, url});
    alert("Recurso agregado correctamente!");
    cerrarModalAdmin();
    mostrarContenidoSemana(cursoActual, subcursoActual, semanaActual); // Refresca la vista
  }

  // Funci√≥n para mostrar recursos en la vista de semana
  function mostrarContenidoSemana(curso, subcurso, sem) {
    semanaActual = sem;
    document.getElementById('contenido-semana-container').classList.remove('hidden');

    let html = `<h2>${curso} - ${subcurso} Semana ${sem}</h2>`;
    html += `<div style="margin-top:15px;">`;

    const listaRecursos = (recursos[curso] && recursos[curso][subcurso] && recursos[curso][subcurso][sem]) || [];
    listaRecursos.forEach(r => {
      if(r.tipo === "grabacion") html += `<button onclick="window.open('${r.url}','_blank')" style="margin:5px; background:#10b981;">üìπ ${r.titulo}</button>`;
      if(r.tipo === "pdf") html += `<button onclick="window.open('${r.url}','_blank')" style="margin:5px; background:#3b82f6;">üìÑ ${r.titulo}</button>`;
      if(r.tipo === "formulario") html += `<button onclick="abrirFormulario('${curso}','${subcurso}',${sem})" style="margin:5px; background:#f59e0b;">üìù ${r.titulo}</button>`;
    });

    html += `</div>`;

    // Si es admin, mostrar bot√≥n para agregar recursos
    if(usuarioActual.rol === "admin") {
      html += `<button onclick="abrirModalAdmin()" style="margin-top:20px; background:#2563eb;">Agregar Recurso/Formulario</button>`;
    }

    document.getElementById('contenido-semana-container').innerHTML = html;
  }

  // Formularios de "Apliquemos lo aprendido"
  function abrirFormulario(curso, subcurso, sem) {
    const preguntas = (formularios[curso] && formularios[curso][subcurso] && formularios[curso][subcurso][sem]) || [];
    if(preguntas.length === 0) { alert("No hay preguntas disponibles"); return; }

    let html = `<h2>${curso} - ${subcurso} Semana ${sem} - Formulario</h2>`;
    preguntas.forEach((p,i) => {
      html += `<p>${i+1}. ${p.pregunta}</p>`;
      p.opciones.forEach((o,j) => {
        html += `<input type="radio" name="pregunta${i}" value="${o}"> ${o}<br>`;
      });
    });
    html += `<button onclick="enviarFormulario('${curso}','${subcurso}',${sem})" style="margin-top:15px; background:#10b981;">Enviar</button>`;
    document.getElementById('contenido-semana-container').innerHTML = html;
  }

  function enviarFormulario(curso, subcurso, sem) {
    const preguntas = formularios[curso][subcurso][sem];
    let correctas = 0;
    preguntas.forEach((p,i) => {
      const respuesta = document.querySelector(`input[name="pregunta${i}"]:checked`);
      if(respuesta && respuesta.value === p.correcta) correctas++;
    });
    alert(`Respuestas correctas: ${correctas} de ${preguntas.length}`);
  }

  // Ejemplo de usuario actual (reemplazar con Firebase real)
  const usuarioActual = {nombre:"Admin Prueba", rol:"admin"};

  // Inicializar la p√°gina mostrando cursos
  mostrarCursos();

</script>

</body>
</html>


